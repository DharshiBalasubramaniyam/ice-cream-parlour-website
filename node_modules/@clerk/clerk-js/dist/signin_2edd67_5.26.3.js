"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[417],{72:function(e,t,o){o.d(t,{n:function(){return s}});var r=o(4380),n=o(9333),i=o(338);const s=e=>{const{onBackLinkClick:t}=e;return(0,r.Y)(i.ErrorCard,{cardTitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.title"),cardSubtitle:(0,n.localizationKeys)("signIn.alternativeMethods.getHelp.content"),onBackLinkClick:t})}},601:function(e,t,o){o.r(t),o.d(t,{SignIn:function(){return ge},SignInModal:function(){return ve}});var r=o(4380),n=o(3931),i=o(4041),s=o(9251),a=o(844),c=o(9333),l=o(166),d=o(5882),u=o(338),p=o(5909),h=o(1101),m=o(9927);const f=(0,u.withCardStateProvider)((()=>{const e=(0,a.useCoreSignIn)(),t=(0,u.useCardState)(),{navigate:o}=(0,l.useRouter)(),n=(0,h.p)(),{userSettings:{passwordSettings:s}}=(0,a.useEnvironment)(),{t:f,locale:g}=(0,c.useLocalizations)(),v="needs_new_password"===e.status&&"reset_password_email_code"!==e.firstFactorVerification.strategy&&"reset_password_phone_code"!==e.firstFactorVerification.strategy;i.useEffect((()=>{v&&t.setError(f((0,c.localizationKeys)("signIn.resetPassword.requiredMessage")))}),[]);const I=(0,m.tJ)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,m.C5)(e,{t:f,locale:g,passwordSettings:s})}),C=(0,m.tJ)("confirmPassword","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),w=(0,m.tJ)("signOutOfOtherSessions","",{type:"checkbox",label:(0,c.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:S,isPasswordMatch:y}=(0,p.Zg)({passwordField:I,confirmPasswordField:C}),A=y;return(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.Y)(u.Header.Root,{showLogo:!0,children:(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.title")})}),(0,r.Y)(u.Card.Alert,{children:t.error}),(0,r.Y)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:(0,r.FD)(u.Form.Root,{onSubmit:async()=>{I.clearFeedback(),C.clearFeedback();try{const{status:t,createdSessionId:r}=await e.resetPassword({password:I.value,signOutOfOtherSessions:w.checked});switch(t){case"complete":if(r){const e=new URLSearchParams;return e.set("createdSessionId",r),o(`../reset-password-success?${e.toString()}`)}return console.error((0,d.wv)(t,n));case"needs_second_factor":return o("../factor-two");default:return console.error((0,d.wv)(t,n))}}catch(r){return(0,m.H4)(r,[I,C],t.setError)}},onBlur:()=>{I.value&&S(C.value)},gap:8,children:[(0,r.FD)(c.Col,{gap:6,children:[(0,r.Y)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.identifier||"",style:{display:"none"}}),(0,r.Y)(u.Form.ControlRow,{elementId:I.id,children:(0,r.Y)(u.Form.PasswordInput,{...I.props,isRequired:!0,autoFocus:!0})}),(0,r.Y)(u.Form.ControlRow,{elementId:C.id,children:(0,r.Y)(u.Form.PasswordInput,{...C.props,onChange:e=>(e.target.value&&S(e.target.value),C.props.onChange(e))})}),!v&&(0,r.Y)(u.Form.ControlRow,{elementId:w.id,children:(0,r.Y)(u.Form.Checkbox,{...w.props})})]}),(0,r.FD)(c.Col,{gap:3,children:[(0,r.Y)(u.Form.SubmitButton,{isDisabled:!A,localizationKey:(0,c.localizationKeys)("signIn.resetPassword.formButtonPrimary")}),(0,r.Y)(u.Card.Action,{elementId:"alternativeMethods",children:(0,r.Y)(u.Card.ActionLink,{elementDescriptor:c.descriptors.backLink,localizationKey:(0,c.localizationKeys)("backButton"),onClick:()=>o("../")})})]})]})})]}),(0,r.Y)(u.Card.Footer,{})]})}));var g=o(9065),v=o(2170);const I=(0,u.withCardStateProvider)((()=>{const e=(0,u.useCardState)();return(0,g.h)(),(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.Y)(u.Header.Root,{showLogo:!0,children:(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.title")})}),(0,r.Y)(u.Card.Alert,{children:e.error}),(0,r.FD)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:[(0,r.Y)(c.Text,{localizationKey:(0,c.localizationKeys)("signIn.resetPassword.successMessage")}),(0,r.Y)(v.so,{direction:"row",center:!0,children:(0,r.Y)(c.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:c.descriptors.spinner})})]})]}),(0,r.Y)(u.Card.Footer,{})]})}));var C=o(7362),w=o(1241),S=o(8313),y=o(7086),A=o(3962);const k=(0,C.SY)((0,u.withCardStateProvider)((()=>{const e=(0,w.f0)(),{userProfileUrl:t}=(0,a.useEnvironment)().displayConfig,{navigateAfterSignIn:o,path:n}=(0,a.useSignInContext)(),{navigateAfterSignOut:i}=(0,a.useSignOutContext)(),{handleSignOutAllClicked:s,handleSessionClicked:l,activeSessions:d,handleAddAccountClicked:p}=(0,A.u)({navigateAfterSignOut:i,navigateAfterSwitchSession:o,userProfileUrl:t,signInUrl:n,user:void 0});return(0,r.Y)(c.Flow.Part,{part:"accountSwitcher",children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{sx:e=>({padding:`${e.space.$8} ${e.space.$none} ${e.space.$none}`}),children:[(0,r.FD)(u.Header.Root,{children:[(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.accountSwitcher.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.accountSwitcher.subtitle")})]}),(0,r.Y)(u.Card.Alert,{children:e.error}),(0,r.Y)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:(0,r.FD)(u.Actions,{role:"menu",children:[d.map((e=>(0,r.Y)(u.PreviewButton,{onClick:l(e),sx:e=>({height:e.sizes.$16,justifyContent:"flex-start",borderRadius:0}),icon:S.yO,children:(0,r.Y)(u.UserPreview,{user:e.user,sx:{width:"100%"}})},e.id))),(0,r.Y)(u.Action,{elementDescriptor:c.descriptors.accountSwitcherActionButton,elementId:c.descriptors.accountSwitcherActionButton.setId("addAccount"),iconBoxElementDescriptor:c.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:c.descriptors.accountSwitcherActionButtonIconBox.setId("addAccount"),iconElementDescriptor:c.descriptors.accountSwitcherActionButtonIcon,iconElementId:c.descriptors.accountSwitcherActionButtonIcon.setId("addAccount"),icon:S.OM,label:(0,c.localizationKeys)("signIn.accountSwitcher.action__addAccount"),onClick:p,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})})]}),(0,r.Y)(u.Card.Footer,{sx:e=>({">:first-of-type":{padding:`${e.space.$1}`,width:"100%"}}),children:(0,r.Y)(u.Card.Action,{sx:{width:"100%",">:first-of-type":{width:"100%",borderBottomWidth:0}},children:(0,r.Y)(y.ww,{handleSignOutAllClicked:s,elementDescriptor:c.descriptors.accountSwitcherActionButton,elementId:c.descriptors.accountSwitcherActionButton.setId("signOutAll"),iconBoxElementDescriptor:c.descriptors.accountSwitcherActionButtonIconBox,iconBoxElementId:c.descriptors.accountSwitcherActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:c.descriptors.accountSwitcherActionButtonIcon,iconElementId:c.descriptors.accountSwitcherActionButtonIcon.setId("signOutAll"),label:(0,c.localizationKeys)("signIn.accountSwitcher.action__signOutAll"),actionSx:e=>({padding:`${e.space.$2} ${e.space.$2}`})})})})]})})})));var b=o(6588),B=o(9513),_=o(7453),F=o(9351),Y=o(5675);const P=i.memo((e=>{const t=(0,n.ho)(),{navigate:o}=(0,l.useRouter)(),i=(0,w.f0)(),{displayConfig:s}=(0,F.O)(),c=(0,a.useSignInContext)(),d=(0,a.useCoreSignIn)(),u=(0,_.u)(c,s.signInUrl),p=c.afterSignInUrl||"/";return(0,r.Y)(Y.V,{...e,oauthCallback:e=>d.authenticateWithRedirect({strategy:e,redirectUrl:u,redirectUrlComplete:p}).catch((e=>(0,m.H4)(e,[],i.setError))),web3Callback:e=>t.authenticateWithWeb3({customNavigate:o,redirectUrl:p,signUpContinueUrl:c.signUpContinueUrl,strategy:e}).catch((e=>(0,m.H4)(e,[],i.setError)))})}));var z=o(6761);function E(){var e;return null===(e=(0,a.useCoreSignIn)().supportedFirstFactors)||void 0===e?void 0:e.find((({strategy:e})=>(0,z.Kw)(e)))}var D=o(72);const K=e=>((e,t)=>{const[o,n]=i.useState(!1),s=i.useCallback((()=>n((e=>!e))),[n]);return o?(0,r.Y)(D.n,{onBackLinkClick:s}):(0,r.Y)(e,{...t,onHavingTroubleClick:s})})(x,{...e}),x=e=>{const{onBackLinkClick:t,onHavingTroubleClick:o,onFactorSelected:n,mode:i="default"}=e,s=(0,w.f0)(),l=E(),{supportedFirstFactors:d}=(0,a.useCoreSignIn)(),{firstPartyFactors:p,hasAnyStrategy:h}=(0,b.y)({filterOutFactor:null==e?void 0:e.currentFactor,supportedFirstFactors:d}),m=function(e){switch(e){case"forgot":return"forgotPasswordMethods";case"pwned":return"passwordPwnedMethods";default:return"alternativeMethods"}}(i),f=function(e){switch(e){case"forgot":return(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.title");case"pwned":return(0,c.localizationKeys)("signIn.passwordPwned.title");default:return(0,c.localizationKeys)("signIn.alternativeMethods.title")}}(i),g=function(e){switch(e){case"forgot":case"pwned":return!0;default:return!1}}(i);return(0,r.Y)(c.Flow.Part,{part:m,children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(u.Header.Title,{localizationKey:f}),!g&&(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,r.Y)(u.Card.Alert,{children:s.error}),(0,r.FD)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:6,children:[g&&l&&(0,r.Y)(c.Button,{localizationKey:L(l),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,isDisabled:s.isLoading,onClick:()=>{s.setError(void 0),n(l)}}),g&&h&&(0,r.Y)(u.Divider,{dividerText:(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.label__alternativeMethods")}),(0,r.FD)(c.Col,{gap:4,children:[h&&(0,r.FD)(c.Flex,{elementDescriptor:c.descriptors.alternativeMethods,direction:"col",gap:2,children:[(0,r.Y)(P,{enableWeb3Providers:!0,enableOAuthProviders:!0}),p&&p.map(((e,t)=>(0,r.Y)(u.ArrowBlockButton,{leftIcon:M(e),textLocalizationKey:L(e),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,textElementDescriptor:c.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:c.descriptors.alternativeMethodsBlockButtonArrow,textVariant:"buttonLarge",isDisabled:s.isLoading,onClick:()=>{s.setError(void 0),n(e)}},t)))]}),t&&(0,r.Y)(u.BackLink,{boxElementDescriptor:c.descriptors.backRow,linkElementDescriptor:c.descriptors.backLink,onClick:t})]})]})]}),(0,r.Y)(u.Card.Footer,{children:(0,r.FD)(u.Card.Action,{elementId:"havingTrouble",children:[(0,r.Y)(u.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:o})]})})]})})};function L(e){switch(e.strategy){case"email_link":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__emailLink",{identifier:(0,m.uu)(e.safeIdentifier)||""});case"email_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__emailCode",{identifier:(0,m.uu)(e.safeIdentifier)||""});case"phone_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,m.uu)(e.safeIdentifier)||""});case"password":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__password");case"passkey":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__passkey");case"reset_password_email_code":case"reset_password_phone_code":return(0,c.localizationKeys)("signIn.forgotPasswordAlternativeMethods.blockButton__resetPassword");default:throw`Invalid sign in strategy: "${e.strategy}"`}}function M(e){return{email_link:S.qY,email_code:S.Ps,phone_code:S.bK,reset_password_email_code:S.Zm,reset_password_phone_code:S.Zm,password:S.JD,passkey:S.$A}[e.strategy]}var R=o(1732);const T=e=>{const t=(0,a.useCoreSignIn)(),o=(0,u.useCardState)(),{navigate:s}=(0,l.useRouter)(),{navigateAfterSignIn:c}=(0,a.useSignInContext)(),{setActive:p}=(0,n.ho)(),f=(0,h.p)(),g=(0,n.ho)();i.useEffect((()=>{e.factorAlreadyPrepared||v()}),[]);const v=()=>{t.prepareFirstFactor(e.factor).then((()=>e.onFactorPrepare())).catch((e=>(0,m.H4)(e,[],o.setError)))};return(0,r.Y)(u.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,inputLabel:e.inputLabel,resendButton:e.resendButton,onCodeEntryFinishedAction:(o,r,n)=>{t.attemptFirstFactor({strategy:e.factor.strategy,code:o}).then((async e=>{switch(await r(),e.status){case"complete":return p({session:e.createdSessionId,beforeEmit:c});case"needs_second_factor":return s("../factor-two");case"needs_new_password":return s("../reset-password");default:return console.error((0,d.wv)(e.status,f))}})).catch((e=>(0,R._d)(e)?g.__internal_navigateWithError("..",e.errors[0]):n(e)))},onResendCodeClicked:v,safeIdentifier:e.factor.safeIdentifier,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,showAlternativeMethods:e.showAlternativeMethods,onIdentityPreviewEditClicked:()=>s("../"),onBackLinkClicked:e.onBackLinkClicked})},U=e=>(0,r.Y)(c.Flow.Part,{part:"emailCode",children:(0,r.Y)(T,{...e,cardTitle:(0,c.localizationKeys)("signIn.emailCode.title"),cardSubtitle:(0,c.localizationKeys)("signIn.emailCode.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.emailCode.formTitle"),resendButton:(0,c.localizationKeys)("signIn.emailCode.resendButton")})});var O=o(9859),$=o(6910),H=o(8622);const W=e=>{const{t:t}=(0,c.useLocalizations)(),o=(0,w.f0)(),s=(0,a.useCoreSignIn)(),l=(0,a.useSignInContext)(),{signInUrl:d}=l,{navigate:p}=(0,H.r)(),{navigateAfterSignIn:h}=(0,a.useSignInContext)(),{setActive:f}=(0,n.ho)(),{startEmailLinkFlow:g,cancelEmailLinkFlow:v}=(0,$.u)(s),[I,S]=i.useState(!1),y=(0,n.ho)();i.useEffect((()=>{A()}),[]);const A=()=>{g({emailAddressId:e.factor.emailAddressId,redirectUrl:(0,_.W)(l,d)}).then((e=>k(e))).catch((e=>{if((0,O._d)(e))return y.__internal_navigateWithError("..",e.errors[0]);(0,m.H4)(e,[],o.setError)}))},k=async e=>{const r=e.firstFactorVerification;"expired"===r.status?o.setError(t((0,c.localizationKeys)("formFieldError__verificationLinkExpired"))):r.verifiedFromTheSameClient()?S(!0):await b(e)},b=async e=>"complete"===e.status?f({session:e.createdSessionId,beforeEmit:h}):"needs_second_factor"===e.status?p("../factor-two"):void 0;return I?(0,r.Y)(C.$W,{title:(0,c.localizationKeys)("signIn.emailLink.verifiedSwitchTab.titleNewTab"),subtitle:(0,c.localizationKeys)("signIn.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.Y)(c.Flow.Part,{part:"emailLink",children:(0,r.Y)(u.VerificationLinkCard,{cardTitle:(0,c.localizationKeys)("signIn.emailLink.title"),cardSubtitle:(0,c.localizationKeys)("signIn.emailLink.subtitle"),formTitle:(0,c.localizationKeys)("signIn.emailLink.formTitle"),formSubtitle:(0,c.localizationKeys)("signIn.emailLink.formSubtitle"),resendButton:(0,c.localizationKeys)("signIn.emailLink.resendButton"),onResendCodeClicked:()=>{v(),A()},safeIdentifier:e.factor.safeIdentifier,profileImageUrl:s.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked})})},N=e=>(0,r.Y)(c.Flow.Part,{part:"resetPassword",children:(0,r.Y)(T,{...e,showAlternativeMethods:!1,cardTitle:(0,c.localizationKeys)("signIn.forgotPassword.title"),inputLabel:(0,c.localizationKeys)("signIn.forgotPassword.formTitle"),resendButton:(0,c.localizationKeys)("signIn.forgotPassword.resendButton")})});var V=o(2410);function Q(e){const t=(0,u.useCardState)(),{setActive:o,__internal_navigateWithError:r}=(0,n.ho)(),s=(0,h.p)(),{navigateAfterSignIn:c}=(0,a.useSignInContext)(),{authenticateWithPasskey:l}=(0,a.useCoreSignIn)();return(0,i.useEffect)((()=>()=>{V.sv.abort()}),[]),(0,i.useCallback)((async(...n)=>{try{const t=await l(...n);switch(t.status){case"complete":return o({session:t.createdSessionId,beforeEmit:c});case"needs_second_factor":return e();default:return console.error((0,d.wv)(t.status,s))}}catch(i){const{flow:e}=n[0]||{};if((0,O.Cm)(i)){if("passkey_operation_aborted"===i.code)return;if("autofill"===e&&"passkey_retrieval_cancelled"===i.code)return}if((0,O._d)(i))return r("..",i.errors[0]);(0,m.H4)(i,[],t.setError)}}),[])}const G=e=>{const{onShowAlternativeMethodsClick:t}=e,o=(0,u.useCardState)(),n=(0,a.useCoreSignIn)(),{navigate:s}=(0,H.r)(),[l,d]=i.useState(!1),p=i.useCallback((()=>d((e=>!e))),[d]),h=Q((()=>s("../factor-two")));return l?(0,r.Y)(D.n,{onBackLinkClick:p}):(0,r.Y)(c.Flow.Part,{part:"password",children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(c.Icon,{elementDescriptor:c.descriptors.passkeyIcon,icon:S.$A,sx:e=>({color:e.colors.$neutralAlpha500,marginInline:"auto",paddingBottom:e.sizes.$1,width:e.sizes.$12,height:e.sizes.$12})}),(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.passkey.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.passkey.subtitle")}),(0,r.Y)(u.IdentityPreview,{identifier:n.identifier,avatarUrl:n.userData.imageUrl,onClick:()=>s("../")})]}),(0,r.Y)(u.Card.Alert,{children:o.error}),(0,r.FD)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:4,children:[(0,r.Y)(u.Form.Root,{onSubmit:e=>(e.preventDefault(),h()),gap:8,children:(0,r.Y)(u.Form.SubmitButton,{hasArrow:!0})}),(0,r.Y)(u.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)(t?"footerActionLink__useAnotherMethod":"signIn.alternativeMethods.actionLink"),onClick:t||p})})]})]}),(0,r.Y)(u.Card.Footer,{})]})})},J=e=>{const{onShowAlternativeMethodsClick:t,onPasswordPwned:o}=e,s=i.useRef(null),l=(0,u.useCardState)(),{setActive:p}=(0,n.ho)(),f=(0,a.useCoreSignIn)(),{navigateAfterSignIn:g}=(0,a.useSignInContext)(),v=(0,h.p)(),I=(e=>{const{onForgotPasswordMethodClick:t,onShowAlternativeMethodsClick:o}=e,r=E(),n=(0,m.tJ)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__password"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__password")});return{...n,props:{...n.props,actionLabel:r||o?(0,c.localizationKeys)("formFieldAction__forgotPassword"):"",onActionClicked:t||o||(()=>null)}}})(e),{navigate:C}=(0,H.r)(),[w,S]=i.useState(!1),y=i.useCallback((()=>S((e=>!e))),[S]),A=(0,n.ho)();return w?(0,r.Y)(D.n,{onBackLinkClick:y}):(0,r.Y)(c.Flow.Part,{part:"password",children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.password.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.password.subtitle")}),(0,r.Y)(u.IdentityPreview,{identifier:f.identifier,avatarUrl:f.userData.imageUrl,onClick:()=>C("../")})]}),(0,r.Y)(u.Card.Alert,{children:l.error}),(0,r.FD)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:4,children:[(0,r.FD)(u.Form.Root,{onSubmit:async e=>(e.preventDefault(),f.attemptFirstFactor({strategy:"password",password:I.value}).then((e=>{switch(e.status){case"complete":return p({session:e.createdSessionId,beforeEmit:g});case"needs_second_factor":return C("../factor-two");default:return console.error((0,d.wv)(e.status,v))}})).catch((e=>(0,O._d)(e)?A.__internal_navigateWithError("..",e.errors[0]):(0,O.Au)(e)&&o?(l.setError({...e.errors[0],code:"form_password_pwned__sign_in"}),void o()):((0,m.H4)(e,[I],l.setError),void setTimeout((()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()}),0))))),gap:8,children:[(0,r.Y)("input",{readOnly:!0,id:"identifier-field",name:"identifier",value:f.identifier||"",style:{display:"none"}}),(0,r.Y)(u.Form.ControlRow,{elementId:I.id,children:(0,r.Y)(u.Form.PasswordInput,{...I.props,ref:s,autoFocus:!0})}),(0,r.Y)(u.Form.SubmitButton,{hasArrow:!0})]}),(0,r.Y)(u.Card.Action,{elementId:t?"alternativeMethods":"havingTrouble",children:(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)(t?"signIn.password.actionLink":"signIn.alternativeMethods.actionLink"),onClick:t||y})})]})]}),(0,r.Y)(u.Card.Footer,{})]})})},q=e=>{const{applicationName:t}=(0,a.useEnvironment)().displayConfig;return(0,r.Y)(c.Flow.Part,{part:"phoneCode",children:(0,r.Y)(T,{...e,cardTitle:(0,c.localizationKeys)("signIn.phoneCode.title"),cardSubtitle:(0,c.localizationKeys)("signIn.phoneCode.subtitle",{applicationName:t}),inputLabel:(0,c.localizationKeys)("signIn.phoneCode.formTitle"),resendButton:(0,c.localizationKeys)("signIn.phoneCode.resendButton")})})},j=e=>{if(!e)return"";let t=e.strategy;return"emailAddressId"in e&&(t+=e.emailAddressId),"phoneNumberId"in e&&(t+=e.phoneNumberId),t},Z=(0,C.SY)((0,u.withCardStateProvider)((function(){const e=(0,a.useCoreSignIn)(),{preferredSignInStrategy:t}=(0,a.useEnvironment)().displayConfig,o=e.supportedFirstFactors,n=(0,l.useRouter)(),s=(0,u.useCardState)(),{supportedFirstFactors:c}=(0,a.useCoreSignIn)(),d=i.useRef(""),[{currentFactor:p},h]=i.useState((()=>({currentFactor:(0,z.xf)(o,e.identifier,t),prevCurrentFactor:void 0}))),{hasAnyStrategy:m}=(0,b.y)({filterOutFactor:p,supportedFirstFactors:c}),[f,g]=i.useState((()=>!p||!(0,z.Cm)(p))),v=E(),[I,C]=i.useState(!1),[w,S]=i.useState(!1);if(i.useEffect((()=>{"needs_identifier"!==e.status&&null!==e.status||n.navigate("../")}),[]),!p&&e.status)return(0,r.Y)(u.ErrorCard,{cardTitle:(0,B.GQ)("signIn.noAvailableMethods.title"),cardSubtitle:(0,B.GQ)("signIn.noAvailableMethods.subtitle"),message:(0,B.GQ)("signIn.noAvailableMethods.message")});const y=m?()=>g((e=>!e)):void 0,A=()=>C((e=>!e)),k=()=>{d.current=j(p)};if(f||I){const e=(0,z.Cm)(p),t=f?y:A,o=()=>{s.setError(void 0),S(!1),null==t||t()},n=I?w?"pwned":"forgot":"default";return(0,r.Y)(K,{mode:n,onBackLinkClick:e?o:void 0,onFactorSelected:e=>{var o;o=e,h((e=>({currentFactor:o,prevCurrentFactor:e.currentFactor}))),null==t||t()},currentFactor:p})}if(!p)return(0,r.Y)(u.LoadingCard,{});switch(null==p?void 0:p.strategy){case"passkey":return(0,r.Y)(G,{onFactorPrepare:k,onShowAlternativeMethodsClick:y});case"password":return(0,r.Y)(J,{onForgotPasswordMethodClick:v?A:y,onShowAlternativeMethodsClick:y,onPasswordPwned:()=>{S(!0),A()}});case"email_code":return(0,r.Y)(U,{factorAlreadyPrepared:d.current===j(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:y});case"phone_code":return(0,r.Y)(q,{factorAlreadyPrepared:d.current===j(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:y});case"email_link":return(0,r.Y)(W,{factorAlreadyPrepared:d.current===j(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:y});case"reset_password_phone_code":return(0,r.Y)(N,{factorAlreadyPrepared:d.current===j(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:y,onBackLinkClicked:()=>{h((e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor}))),A()},cardSubtitle:(0,B.GQ)("signIn.forgotPassword.subtitle_phone")});case"reset_password_email_code":return(0,r.Y)(N,{factorAlreadyPrepared:d.current===j(p),onFactorPrepare:k,factor:p,onShowAlternativeMethodsClicked:y,onBackLinkClicked:()=>{h((e=>({currentFactor:e.prevCurrentFactor,prevCurrentFactor:e.currentFactor}))),A()},cardSubtitle:(0,B.GQ)("signIn.forgotPassword.subtitle_email")});default:return(0,r.Y)(u.LoadingCard,{})}}))),X=e=>{const[t,o]=i.useState(!1),n=i.useCallback((()=>o((e=>!e))),[o]);return t?(0,r.Y)(D.n,{onBackLinkClick:n}):(0,r.Y)(ee,{onBackLinkClick:e.onBackLinkClick,onFactorSelected:e.onFactorSelected,onHavingTroubleClick:n})},ee=e=>{const{onHavingTroubleClick:t,onFactorSelected:o,onBackLinkClick:n}=e,i=(0,w.f0)(),{supportedSecondFactors:s}=(0,a.useCoreSignIn)();return(0,r.Y)(c.Flow.Part,{part:"alternativeMethods",children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.subtitle")})]}),(0,r.Y)(u.Card.Alert,{children:i.error}),(0,r.FD)(c.Col,{elementDescriptor:c.descriptors.main,gap:3,children:[(0,r.Y)(c.Col,{gap:2,children:s&&s.sort(m.Wy).map(((e,t)=>(0,r.Y)(u.ArrowBlockButton,{textLocalizationKey:te(e),elementDescriptor:c.descriptors.alternativeMethodsBlockButton,textElementDescriptor:c.descriptors.alternativeMethodsBlockButtonText,arrowElementDescriptor:c.descriptors.alternativeMethodsBlockButtonArrow,isDisabled:i.isLoading,onClick:()=>o(e)},t)))}),(0,r.Y)(u.Card.Action,{elementId:"alternativeMethods",children:n&&(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("backButton"),onClick:e.onBackLinkClick})})]})]}),(0,r.Y)(u.Card.Footer,{children:(0,r.FD)(u.Card.Action,{elementId:"havingTrouble",children:[(0,r.Y)(u.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionText")}),(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.alternativeMethods.actionLink"),onClick:t})]})})]})})};function te(e){switch(e.strategy){case"phone_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__phoneCode",{identifier:(0,m.uu)(e.safeIdentifier)||""});case"totp":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__totp");case"backup_code":return(0,c.localizationKeys)("signIn.alternativeMethods.blockButton__backupCode");default:throw`Invalid sign in strategy: "${e.strategy}"`}}const oe=e=>{const{onShowAlternativeMethodsClicked:t}=e,o=(0,a.useCoreSignIn)(),{navigateAfterSignIn:i}=(0,a.useSignInContext)(),{setActive:s}=(0,n.ho)(),{navigate:p}=(0,l.useRouter)(),f=(0,h.p)(),g=(0,u.useCardState)(),v=(0,m.tJ)("code","",{type:"text",label:(0,c.localizationKeys)("formFieldLabel__backupCode"),isRequired:!0}),I=(0,n.ho)(),C=e=>{var t,o;return(0,z.Kw)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&"verified"===(null===(o=e.firstFactorVerification)||void 0===o?void 0:o.status)};return(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.backupCodeMfa.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:C(o)?(0,c.localizationKeys)("signIn.forgotPassword.subtitle"):(0,c.localizationKeys)("signIn.backupCodeMfa.subtitle")})]}),(0,r.Y)(u.Card.Alert,{children:g.error}),(0,r.Y)(c.Col,{elementDescriptor:c.descriptors.main,gap:8,children:(0,r.FD)(u.Form.Root,{onSubmit:e=>(e.preventDefault(),o.attemptSecondFactor({strategy:"backup_code",code:v.value}).then((e=>{if("complete"===e.status){if(C(e)&&e.createdSessionId){const t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),p(`../reset-password-success?${t.toString()}`)}return s({session:e.createdSessionId,beforeEmit:i})}return console.error((0,d.wv)(e.status,f))})).catch((e=>{if((0,O._d)(e))return I.__internal_navigateWithError("..",e.errors[0]);(0,m.H4)(e,[v],g.setError)}))),children:[(0,r.Y)(u.Form.ControlRow,{elementId:v.id,children:(0,r.Y)(u.Form.PlainInput,{...v.props,autoFocus:!0,onActionClicked:t})}),(0,r.FD)(c.Col,{gap:3,children:[(0,r.Y)(u.Form.SubmitButton,{hasArrow:!0}),(0,r.Y)(u.Card.Action,{elementId:"alternativeMethods",children:t&&(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("footerActionLink__useAnotherMethod"),onClick:t})})]})]})})]}),(0,r.Y)(u.Card.Footer,{})]})},re=e=>{const t=(0,a.useCoreSignIn)(),o=(0,u.useCardState)(),{navigateAfterSignIn:s}=(0,a.useSignInContext)(),{setActive:p}=(0,n.ho)(),{navigate:f}=(0,l.useRouter)(),g=(0,h.p)(),v=(0,n.ho)();i.useEffect((()=>{e.factorAlreadyPrepared||null==I||I()}),[]);const I=e.prepare?()=>{var t;return null===(t=e.prepare)||void 0===t?void 0:t.call(e).then((()=>e.onFactorPrepare())).catch((e=>{if((0,O._d)(e))return v.__internal_navigateWithError("..",e.errors[0]);(0,m.H4)(e,[],o.setError)}))}:void 0,C=e=>{var t,o;return(0,z.Kw)(null===(t=e.firstFactorVerification)||void 0===t?void 0:t.strategy)&&"verified"===(null===(o=e.firstFactorVerification)||void 0===o?void 0:o.status)};return(0,r.Y)(u.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:C(t)?(0,c.localizationKeys)("signIn.forgotPassword.subtitle"):e.cardSubtitle,resendButton:e.resendButton,inputLabel:e.inputLabel,onCodeEntryFinishedAction:(o,r,n)=>{t.attemptSecondFactor({strategy:e.factor.strategy,code:o}).then((async e=>{if(await r(),"complete"===e.status){if(C(e)&&e.createdSessionId){const t=new URLSearchParams;return t.set("createdSessionId",e.createdSessionId),f(`../reset-password-success?${t.toString()}`)}return p({session:e.createdSessionId,beforeEmit:s})}return console.error((0,d.wv)(e.status,g))})).catch((e=>(0,O._d)(e)?v.__internal_navigateWithError("..",e.errors[0]):n(e)))},onResendCodeClicked:I,safeIdentifier:"safeIdentifier"in e.factor?e.factor.safeIdentifier:void 0,profileImageUrl:t.userData.imageUrl,onShowAlternativeMethodsClicked:e.onShowAlternativeMethodsClicked,children:C(t)&&(0,r.Y)(c.Text,{localizationKey:(0,c.localizationKeys)("signIn.resetPasswordMfa.detailsLabel"),colorScheme:"secondary"})})},ne=e=>{const t=(0,a.useCoreSignIn)();return(0,r.Y)(c.Flow.Part,{part:"phoneCode2Fa",children:(0,r.Y)(re,{...e,cardTitle:(0,c.localizationKeys)("signIn.phoneCodeMfa.title"),cardSubtitle:(0,c.localizationKeys)("signIn.phoneCodeMfa.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.phoneCodeMfa.formTitle"),resendButton:(0,c.localizationKeys)("signIn.phoneCodeMfa.resendButton"),prepare:()=>{const{phoneNumberId:o,strategy:r}=e.factor;return t.prepareSecondFactor({phoneNumberId:o,strategy:r})}})})},ie=e=>(0,r.Y)(c.Flow.Part,{part:"totp2Fa",children:(0,r.Y)(re,{...e,cardTitle:(0,c.localizationKeys)("signIn.totpMfa.title"),cardSubtitle:(0,c.localizationKeys)("signIn.totpMfa.subtitle"),inputLabel:(0,c.localizationKeys)("signIn.totpMfa.formTitle")})}),se=e=>{if(!e)return"";let t=e.strategy;return"phoneNumberId"in e&&(t+=e.phoneNumberId),t},ae=(0,C.SY)((0,u.withCardStateProvider)((function(){const e=(0,a.useCoreSignIn)().supportedSecondFactors,t=i.useRef(""),[o,n]=i.useState((()=>(0,z.R5)(e))),[s,c]=i.useState(!o),l=()=>c((e=>!e)),d=()=>{t.current=se(o)};if(!o)return(0,r.Y)(u.LoadingCard,{});if(s)return(0,r.Y)(X,{onBackLinkClick:l,onFactorSelected:e=>{n(e),l()}});switch(null==o?void 0:o.strategy){case"phone_code":return(0,r.Y)(ne,{factorAlreadyPrepared:t.current===se(o),onFactorPrepare:d,factor:o,onShowAlternativeMethodsClicked:l});case"totp":return(0,r.Y)(ie,{factorAlreadyPrepared:t.current===se(o),onFactorPrepare:d,factor:o,onShowAlternativeMethodsClicked:l});case"backup_code":return(0,r.Y)(oe,{onShowAlternativeMethodsClicked:l});default:return(0,r.Y)(u.LoadingCard,{})}}))),ce=(0,C.SY)(C.Fv);var le=o(2201),de=o(6480),ue=o(4870);const pe=({field:e})=>{const[t,o]=(0,i.useState)(!1),n=(0,i.useRef)(null),s=!(!t&&!(null==e?void 0:e.value));return(0,i.useLayoutEffect)((()=>{const e=setInterval((()=>{if(null==n?void 0:n.current){const t="onAutoFillStart"===window.getComputedStyle(n.current,":autofill").animationName;t&&(o(t),clearInterval(e))}}),500);return()=>{clearInterval(e)}}),[]),(0,i.useEffect)((()=>{(null==e?void 0:e.value)&&""!==e.value&&o(!1)}),[null==e?void 0:e.value]),e?(0,r.Y)(u.Form.ControlRow,{elementId:e.id,sx:s?void 0:{position:"absolute",opacity:0,height:0,pointerEvents:"none",marginTop:"-1rem"},children:(0,r.Y)(u.Form.PasswordInput,{...e.props,ref:n,tabIndex:s?void 0:-1})}):null},he=(0,C.SY)((0,u.withCardStateProvider)((function(){var e;const t=(0,u.useCardState)(),o=(0,n.ho)(),s=(0,p.mN)(),{displayConfig:f,userSettings:g}=(0,a.useEnvironment)(),v=(0,a.useCoreSignIn)(),{navigate:I}=(0,l.useRouter)(),w=(0,a.useSignInContext)(),{navigateAfterSignIn:S,signUpUrl:y}=w,A=(0,h.p)(),k=(0,i.useMemo)((()=>(0,C.E9)(g.enabledFirstFactorIdentifiers)),[g.enabledFirstFactorIdentifiers]),{isWebAuthnAutofillSupported:b}=(()=>{const[e,t]=(0,i.useState)(!1),{navigate:o}=(0,l.useRouter)(),r=Q((()=>o("factor-two"))),{userSettings:n}=(0,a.useEnvironment)(),{passkeySettings:s,attributes:c}=n;return(0,i.useEffect)((()=>{s.allow_autofill&&c.passkey.enabled&&async function(){const e=await(0,le.nn)();t(e),e&&await r({flow:"autofill"})}()}),[]),{isWebAuthnAutofillSupported:e}})(),B=Q((()=>I("factor-two"))),F=(0,le.Bz)(),Y=!!(null===(e=w.initialValues)||void 0===e?void 0:e.phoneNumber)&&!(w.initialValues.emailAddress||w.initialValues.username)&&k.includes("phone_number"),[z,E]=(0,i.useState)(Y?"phone_number":k[0]||""),[D,K]=(0,i.useState)(!1),x=(0,ue.hI)("__clerk_ticket")||"",L=g.enabledFirstFactorIdentifiers,M=g.web3FirstFactors,R=g.authenticatableSocialStrategies,T=g.instanceIsPasswordBased,{currentIdentifier:U,nextIdentifier:O}=(0,C.ZN)(k,z),$=(0,m.tJ)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__password"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__password")}),H=w.initialValues||{},W=(0,i.useMemo)((()=>({email_address:H.emailAddress,email_address_username:H.emailAddress||H.username,username:H.username,phone_number:H.phoneNumber})),[w.initialValues]),N=!!R.length||!!M.length,[V,G]=(0,i.useState)(!(0,m.Xb)()&&!N),J=(0,m.tJ)("identifier",W[z]||"",{...U,isRequired:!0,transformer:e=>e.trim()}),q=(0,m.tJ)("identifier",W.phone_number||"",{...U,isRequired:!0}),j="phone_number"===z?q:J;(0,i.useLayoutEffect)((()=>{var e;j.value.startsWith("+")&&k.includes("phone_number")&&"phone_number"!==z&&!D&&(e=j.value,J.setValue(W[z]||""),q.setValue(e),E("phone_number"),G(!0),K(!0))}),[j.value,k]),(0,i.useEffect)((()=>{x&&(s.setLoading(),t.setLoading(),v.create({strategy:"ticket",ticket:x}).then((e=>{switch(e.status){case"needs_first_factor":return I("factor-one");case"needs_second_factor":return I("factor-two");case"complete":return(0,ue.rw)("__clerk_ticket"),o.setActive({session:e.createdSessionId,beforeEmit:S});default:return void console.error((0,d.wv)(e.status,A))}})).catch((e=>ee(e))).finally((()=>{s.setIdle(),t.setIdle()})))}),[]),(0,i.useEffect)((()=>{!async function(){var e;const o=null===(e=null==v?void 0:v.firstFactorVerification)||void 0===e?void 0:e.error;if(o){switch(o.code){case de.OQ.NOT_ALLOWED_TO_SIGN_UP:case de.OQ.OAUTH_ACCESS_DENIED:case de.OQ.NOT_ALLOWED_ACCESS:case de.OQ.SAML_USER_ATTRIBUTE_MISSING:case de.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case de.OQ.USER_LOCKED:case de.OQ.EXTERNAL_ACCOUNT_NOT_FOUND:case de.OQ.SIGN_UP_MODE_RESTRICTED:t.setError(o);break;default:t.setError("Unable to complete action at this time. If the problem persists please contact support.")}await v.create({})}}()}),[]);const Z=async(...e)=>{var t;try{const r=await((e,t)=>e.then((e=>{var o,r;if(!g.saml.enabled)return e;const n=null===(o=t.find((e=>"password"===e.name)))||void 0===o?void 0:o.value;return!n||(null===(r=e.supportedFirstFactors)||void 0===r?void 0:r.some((e=>"saml"===e.strategy)))?e:e.attemptFirstFactor({strategy:"password",password:n})})))(v.create((e=>{const t=e.some((e=>"password"===e.name&&!!e.value));return t&&!g.saml.enabled||(e=e.filter((e=>"password"!==e.name))),{...(0,m.mK)(e),...t&&!g.saml.enabled&&{strategy:"password"}}})(e)),e);switch(r.status){case"needs_identifier":(null===(t=r.supportedFirstFactors)||void 0===t?void 0:t.some((e=>"saml"===e.strategy)))&&await X();break;case"needs_first_factor":return I("factor-one");case"needs_second_factor":return I("factor-two");case"complete":return o.setActive({session:r.createdSessionId,beforeEmit:S});default:return void console.error((0,d.wv)(r.status,A))}}catch(r){return ee(r)}},X=async()=>{const e=(0,_.u)(w,f.signInUrl),t=w.afterSignInUrl||"/";return v.authenticateWithRedirect({strategy:"saml",redirectUrl:e,redirectUrlComplete:t})},ee=async e=>{if(!e.errors)return;const r=e.errors.find((e=>e.code===de.OQ.INVALID_STRATEGY_FOR_USER||e.code===de.OQ.FORM_PASSWORD_INCORRECT)),n=e.errors.find((e=>"identifier_already_signed_in"===e.code));if(r)await Z(j);else if(n){const e=n.meta.sessionId;await o.setActive({session:e,beforeEmit:S})}else(0,m.H4)(e,[j,$],t.setError)},te=(0,i.useMemo)((()=>({tel:u.Form.PhoneInput,password:u.Form.PasswordInput,text:u.Form.PlainInput,email:u.Form.PlainInput}[j.type])),[j.type]);if(s.isLoading)return(0,r.Y)(u.LoadingCard,{});const{action:oe,...re}=j.props;return(0,r.Y)(c.Flow.Part,{part:"start",children:(0,r.FD)(u.Card.Root,{children:[(0,r.FD)(u.Card.Content,{children:[(0,r.FD)(u.Header.Root,{showLogo:!0,children:[(0,r.Y)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signIn.start.title")}),(0,r.Y)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signIn.start.subtitle")})]}),(0,r.Y)(u.Card.Alert,{children:t.error}),(0,r.FD)(c.Col,{elementDescriptor:c.descriptors.main,gap:6,children:[(0,r.FD)(u.SocialButtonsReversibleContainerWithDivider,{children:[N&&(0,r.Y)(P,{enableWeb3Providers:!0,enableOAuthProviders:!0}),L.length?(0,r.FD)(u.Form.Root,{onSubmit:async e=>(e.preventDefault(),Z(j,$)),gap:8,children:[(0,r.FD)(c.Col,{gap:6,children:[(0,r.Y)(u.Form.ControlRow,{elementId:j.id,children:(0,r.Y)(te,{actionLabel:null==O?void 0:O.action,onActionClicked:()=>{E((e=>k[(k.indexOf(e)+1)%k.length])),G(!0),K(!1)},...re,autoFocus:V,autoComplete:b?"webauthn":void 0})}),(0,r.Y)(pe,{field:T?$:void 0})]}),(0,r.Y)(u.Form.SubmitButton,{hasArrow:!0})]}):null]}),g.attributes.passkey.enabled&&g.passkeySettings.show_sign_in_button&&F&&(0,r.Y)(u.Card.Action,{elementId:"usePasskey",children:(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.start.actionLink__use_passkey"),onClick:()=>B({flow:"discoverable"})})})]})]}),(0,r.Y)(u.Card.Footer,{children:g.signUp.mode===de.P6.PUBLIC&&(0,r.FD)(u.Card.Action,{elementId:"signIn",children:[(0,r.Y)(u.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signIn.start.actionText")}),(0,r.Y)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signIn.start.actionLink"),to:o.buildUrlWithAuth(y)})]})})]})})})));function me(){const e=(0,n.ho)();return i.useEffect((()=>{e.redirectToSignIn()}),[]),null}function fe(){const e=(0,a.useSignInContext)();return(0,r.Y)(c.Flow.Root,{flow:"signIn",children:(0,r.FD)(l.Switch,{children:[(0,r.Y)(l.Route,{path:"factor-one",children:(0,r.Y)(Z,{})}),(0,r.Y)(l.Route,{path:"factor-two",children:(0,r.Y)(ae,{})}),(0,r.Y)(l.Route,{path:"reset-password",children:(0,r.Y)(f,{})}),(0,r.Y)(l.Route,{path:"reset-password-success",children:(0,r.Y)(I,{})}),(0,r.Y)(l.Route,{path:"sso-callback",children:(0,r.Y)(ce,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signInForceRedirectUrl:e.afterSignInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,continueSignUpUrl:e.signUpContinueUrl,transferable:e.transferable,firstFactorUrl:"../factor-one",secondFactorUrl:"../factor-two",resetPasswordUrl:"../reset-password"})}),(0,r.Y)(l.Route,{path:"choose",children:(0,r.Y)(k,{})}),(0,r.Y)(l.Route,{path:"verify",children:(0,r.Y)(s.Y,{redirectUrlComplete:e.afterSignInUrl,redirectUrl:"../factor-two"})}),(0,r.Y)(l.Route,{index:!0,children:(0,r.Y)(he,{})}),(0,r.Y)(l.Route,{children:(0,r.Y)(me,{})})]})})}fe.displayName="SignIn";const ge=(0,a.withCoreSessionSwitchGuard)(fe),ve=e=>{const t={signUpUrl:`/${l.VIRTUAL_ROUTER_BASE_PATH}/sign-up`,...e};return(0,r.Y)(l.Route,{path:"sign-in",children:(0,r.Y)(a.ComponentContext.Provider,{value:{componentName:"SignIn",...t,routing:"virtual"},children:(0,r.Y)("div",{children:(0,r.Y)(ge,{...t,routing:"virtual"})})})})}},6761:function(e,t,o){o.d(t,{Cm:function(){return d},Kw:function(){return h},R5:function(){return u},xf:function(){return c}}),o(1732);var r=o(2201),n=o(7425),i=o(2375);const s=e=>t=>"safeIdentifier"in t&&t.safeIdentifier===e;function a(e){if((0,r.Bz)()){const t=e.find((({strategy:e})=>"passkey"===e));if(t)return t}return null}function c(e,t,o){return e&&0!==e.length?o===n._o.Password?function(e,t){const o=a(e);if(o)return o;const r=e.sort(i.Kn)[0];return"password"===r.strategy?r:e.find(s(t))||r||null}(e,t):function(e,t){const o=a(e);if(o)return o;const r=e.sort(i.Ih),n=r.find(s(t));if(n)return n;const c=r[0];return"email_link"===c.strategy?c:e.find(s(t))||c||null}(e,t):null}const l=["passkey","email_code","password","phone_code","email_link"];function d(e){return!!e&&l.includes(e.strategy)}function u(e){if(!e||0===e.length)return null;const t=e.find((e=>"totp"===e.strategy));if(t)return t;return e.find((e=>"phone_code"===e.strategy))||e[0]}const p=["reset_password_phone_code","reset_password_email_code"],h=e=>!!e&&p.includes(e)},7086:function(e,t,o){o.d(t,{iR:function(){return d},pS:function(){return u},ww:function(){return p}});var r=o(4380),n=o(166),i=o(2237),s=o(844),a=o(9333),c=o(338),l=o(8313);const d=e=>{const{navigate:t}=(0,n.useRouter)(),{handleManageAccountClicked:o,handleSignOutSessionClicked:l,handleUserProfileActionClicked:d,session:u}=e,{menutItems:p}=(0,s.useUserButtonContext)(),h=e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,padding:`${e.space.$4} ${e.space.$5}`});return(0,r.Y)(c.Actions,{role:"menu",elementDescriptor:a.descriptors.userButtonPopoverActions,elementId:a.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:null==p?void 0:p.map((n=>{let s;return s=Object.values(i.dY).includes(n.id)?{elementDescriptor:a.descriptors.userButtonPopoverActionButton,elementId:a.descriptors.userButtonPopoverActionButton.setId(n.id),iconBoxElementDescriptor:a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverActionButtonIconBox.setId(n.id),iconElementDescriptor:a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionButtonIcon.setId(n.id)}:{elementDescriptor:a.descriptors.userButtonPopoverCustomItemButton,elementId:a.descriptors.userButtonPopoverCustomItemButton.setId(n.id),iconBoxElementDescriptor:a.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(n.id),iconElementDescriptor:a.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionItemButtonIcon.setId(n.id)},(0,r.Y)(c.Action,{...s,icon:n.icon,label:n.name,onClick:n.id===i.dY.SIGN_OUT?l(u):()=>(async r=>{var n;return(null==r?void 0:r.path)?(await t(r.path),null==e?void 0:e.completedCallback()):r.id===i.dY.MANAGE_ACCOUNT?await o():(null==r?void 0:r.open)?d(r.open):(null===(n=r.onClick)||void 0===n||n.call(r),null==e?void 0:e.completedCallback())})(n),sx:h,iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4})},n.id)}))})},u=e=>{const{navigate:t}=(0,n.useRouter)(),{handleManageAccountClicked:o,handleSignOutSessionClicked:d,handleSessionClicked:u,handleAddAccountClicked:p,handleUserProfileActionClicked:h,session:m,otherSessions:f}=e,{menutItems:g}=(0,s.useUserButtonContext)(),v=g.every((e=>Object.values(i.dY).includes(e.id)));return(0,r.FD)(r.FK,{children:[v?(0,r.Y)(c.SmallActions,{role:"menu",elementDescriptor:a.descriptors.userButtonPopoverActions,elementId:a.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,r.FD)(a.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:`0 ${e.space.$5} ${e.space.$4}`,gap:e.space.$2}),children:[(0,r.Y)(c.SmallAction,{elementDescriptor:a.descriptors.userButtonPopoverActionButton,elementId:a.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:l.Ko,label:(0,a.localizationKeys)("userButton.action__manageAccount"),onClick:o}),(0,r.Y)(c.SmallAction,{elementDescriptor:a.descriptors.userButtonPopoverActionButton,elementId:a.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:l.Mt,label:(0,a.localizationKeys)("userButton.action__signOut"),onClick:d(m)})]})}):(0,r.Y)(c.SmallActions,{role:"menu",elementDescriptor:a.descriptors.userButtonPopoverActions,elementId:a.descriptors.userButtonPopoverActions.setId("multiSession"),sx:e=>({gap:e.space.$1,paddingBottom:e.space.$2}),children:null==g?void 0:g.map((n=>{let s;return s=Object.values(i.dY).includes(n.id)?{elementDescriptor:a.descriptors.userButtonPopoverActionButton,elementId:a.descriptors.userButtonPopoverActionButton.setId(n.id),iconBoxElementDescriptor:a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverActionButtonIconBox.setId(n.id),iconElementDescriptor:a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionButtonIcon.setId(n.id)}:{elementDescriptor:a.descriptors.userButtonPopoverCustomItemButton,elementId:a.descriptors.userButtonPopoverCustomItemButton.setId(n.id),iconBoxElementDescriptor:a.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(n.id),iconElementDescriptor:a.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionItemButtonIcon.setId(n.id)},(0,r.Y)(c.Action,{...s,icon:n.icon,label:n.name,onClick:n.id===i.dY.SIGN_OUT?d(m):()=>(async r=>{var n;return(null==r?void 0:r.path)?(await t(r.path),null==e?void 0:e.completedCallback()):r.id===i.dY.MANAGE_ACCOUNT?await o():(null==r?void 0:r.open)?h(r.open):(null===(n=r.onClick)||void 0===n||n.call(r),null==e?void 0:e.completedCallback())})(n),sx:e=>({border:0,padding:`${e.space.$2} ${e.space.$5}`,gap:e.space.$3x5}),iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),iconBoxSx:e=>({minHeight:e.sizes.$4,minWidth:e.sizes.$4,alignItems:"center"})},n.id)}))}),(0,r.FD)(c.Actions,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$neutralAlpha100}),children:[f.map((e=>(0,r.Y)(c.PreviewButton,{icon:l.yO,onClick:u(e),role:"menuitem",children:(0,r.Y)(c.UserPreview,{user:e.user})},e.id))),(0,r.Y)(c.Action,{elementDescriptor:a.descriptors.userButtonPopoverActionButton,elementId:a.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:a.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:l.OM,label:(0,a.localizationKeys)("userButton.action__addAccount"),onClick:p,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},p=e=>{const{handleSignOutAllClicked:t,elementDescriptor:o,elementId:n,iconBoxElementDescriptor:i,iconBoxElementId:s,iconElementDescriptor:d,iconElementId:u,label:p,sx:h,actionSx:m}=e;return(0,r.Y)(c.Actions,{role:"menu",sx:[e=>({padding:e.space.$2}),h],children:(0,r.Y)(c.Action,{elementDescriptor:o||a.descriptors.userButtonPopoverActionButton,elementId:n||a.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:i||a.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s||a.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:d||a.descriptors.userButtonPopoverActionButtonIcon,iconElementId:u||a.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:l.Mt,label:p||(0,a.localizationKeys)("userButton.action__signOutAll"),onClick:t,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:`${e.space.$2} ${e.space.$3}`,borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},3962:function(e,t,o){o.d(t,{u:function(){return l}});var r=o(3931),n=o(3132),i=o(338),s=o(9029),a=o(166),c=o(9927);const l=e=>{const{setActive:t,signOut:o,openUserProfile:l}=(0,r.ho)(),d=(0,i.useCardState)(),{activeSessions:u,otherSessions:p}=(0,s.z)({user:e.user}),{navigate:h}=(0,a.useRouter)();return{handleSignOutSessionClicked:t=>()=>0===p.length?o(e.navigateAfterSignOut):o(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally((()=>d.setIdle())),handleManageAccountClicked:()=>{var t;return"navigation"===e.userProfileMode?h(e.userProfileUrl||"").finally((()=>{(async()=>{var t;await(0,c.yy)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()})):(l(e.userProfileProps),null===(t=e.actionCompleteCallback)||void 0===t?void 0:t.call(e))},handleUserProfileActionClicked:t=>{var o;return"navigation"===e.userProfileMode?h(e.userProfileUrl||"").finally((()=>{(async()=>{var t;await(0,c.yy)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()})):(l({...e.userProfileProps,...t&&{__experimental_startPath:t}}),null===(o=e.actionCompleteCallback)||void 0===o?void 0:o.call(e))},handleSignOutAllClicked:()=>o(e.navigateAfterSignOut),handleSessionClicked:o=>async()=>(d.setLoading(),t({session:o,beforeEmit:e.navigateAfterSwitchSession}).finally((()=>{var t;d.setIdle(),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)}))),handleAddAccountClicked:()=>((0,n.y7)(e.signInUrl||window.location.href),(0,c.yy)(2e3)),otherSessions:p,activeSessions:u}}}}]);