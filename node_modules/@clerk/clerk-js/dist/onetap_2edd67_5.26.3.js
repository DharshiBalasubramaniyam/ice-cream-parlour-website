"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[136],{7187:function(e,t,n){n.r(t),n.d(t,{OneTap:function(){return f}});var o=n(4380),c=n(4041),i=n(844),a=n(9333),r=n(166),l=n(3931),u=n(9459),s=n(338),d=n(5909);const p=(0,s.withCardStateProvider)((function(){const e=(0,l.ho)(),{user:t}=(0,l.Jd)(),n=(0,i.useEnvironment)(),o=(0,c.useRef)(!1),{navigate:a}=(0,r.useRouter)(),s=(0,i.useGoogleOneTapContext)();async function p(t){o.current=!1;try{const n=await e.authenticateWithGoogleOneTap({token:t.credential});await e.handleGoogleOneTapCallback(n,s.generateCallbackUrls(window.location.href),a)}catch(n){console.error(n)}}const h=n.displayConfig.googleOneTapClientId,f=!(null==t?void 0:t.id)&&!!h,{data:_}=(0,d.st)(f?async function(){const e=await(0,u.u)();return e.accounts.id.initialize({client_id:h,callback:p,itp_support:s.itpSupport,cancel_on_tap_outside:s.cancelOnTapOutside,auto_select:!1,use_fedcm_for_prompt:s.fedCmSupport}),e}:void 0,"google-identity-services-script");return(0,c.useEffect)((()=>{!_||(null==t?void 0:t.id)||o.current||(_.accounts.id.prompt((t=>{"skipped"===t.getMomentType()&&e.closeGoogleOneTap()})),o.current=!0)}),[e,_,null==t?void 0:t.id]),(0,c.useEffect)((()=>()=>{_&&o.current&&(o.current=!1,_.accounts.id.cancel())}),[_]),null}));function h(){return(0,o.Y)(r.Route,{path:"one-tap",children:(0,o.Y)(a.Flow.Root,{flow:"oneTap",children:(0,o.Y)(r.Switch,{children:(0,o.Y)(r.Route,{index:!0,children:(0,o.Y)(p,{})})})})})}h.displayName="OneTap";const f=(0,i.withCoreSessionSwitchGuard)(h)}}]);