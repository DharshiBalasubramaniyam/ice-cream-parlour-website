"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[796],{9009:function(e,t,n){n.r(t),n.d(t,{ImpersonationFab:function(){return w}});var o=n(4380),i=n(3931),r=n(4041),s=n(8740),a=n(844),c=n(9333),l=n(8388),d=n(9029),p=n(8313),u=n(3965);const h=({width:e,height:t,...n})=>{const{sx:i,...r}=n;return(0,o.Y)(c.Col,{elementDescriptor:c.descriptors.impersonationFabIconContainer,center:!0,sx:[n=>({width:e,height:t,backgroundColor:n.colors.$danger500,borderRadius:n.radii.$circle}),i],...r,children:(0,o.Y)(c.Icon,{elementDescriptor:c.descriptors.impersonationFabIcon,icon:p.kU,sx:e=>({color:e.colors.$white}),size:"lg"})})},m=({title:e,signOutText:t})=>{const{session:n}=(0,i.wV)(),{user:r}=(0,i.Jd)(),{signOut:s}=(0,i.ho)(),{otherSessions:l}=(0,d.z)({user:r}),{navigateAfterSignOut:p,navigateAfterMultiSessionSingleSignOutUrl:u}=(0,a.useSignOutContext)();return(0,o.FD)(c.Col,{sx:e=>({width:"100%",paddingLeft:e.sizes.$4,paddingRight:e.sizes.$6,whiteSpace:"nowrap"}),children:[(0,o.Y)(c.Text,{colorScheme:"secondary",elementDescriptor:c.descriptors.impersonationFabTitle,variant:"buttonLarge",truncate:!0,localizationKey:e}),(0,o.Y)(c.Link,{variant:"buttonLarge",elementDescriptor:c.descriptors.impersonationFabActionLink,sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,":hover":{cursor:"pointer"}}),localizationKey:t,onClick:(e=>()=>0===l.length?s(p):s(u,{sessionId:e.id}))(n)})]})},f=()=>{const{session:e}=(0,i.wV)(),{t:t}=(0,c.useLocalizations)(),{parsedInternalTheme:n}=(0,c.useAppearance)(),a=(0,r.useRef)(null),d=!!(null==e?void 0:e.actor),p=n.sizes.$16,f=p,w="--cl-impersonation-fab-top",g="--cl-impersonation-fab-right",x=()=>{const e=a.current;if(!e)return;const t=window.innerWidth-e.offsetLeft-e.offsetWidth,n=window.innerHeight-e.offsetTop-e.offsetHeight;[e.offsetLeft,t,e.offsetTop,n].some((e=>e<0))&&(document.documentElement.style.setProperty(g,"23px"),document.documentElement.style.setProperty(w,"109px"))},$=r.useCallback((e=>{e.stopPropagation(),e.preventDefault();const t=a.current;if(!t)return;const n=window.innerWidth-t.offsetLeft-t.offsetWidth-e.movementX+"px";document.documentElement.style.setProperty(g,n),document.documentElement.style.setProperty(w,t.offsetTop- -e.movementY+"px")}),[]);if((0,r.useEffect)((()=>(window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)})),[]),!d||!e.user)return null;const v=(0,c.localizationKeys)("impersonationFab.title",{identifier:(0,s.dS)(e.user)||(0,s.Cm)(e.user)}),b=t(v).length;return(0,o.Y)(l.Z,{children:(0,o.FD)(c.Flex,{ref:a,elementDescriptor:c.descriptors.impersonationFab,onPointerDown:()=>{window.addEventListener("pointermove",$),window.addEventListener("pointerup",(()=>{window.removeEventListener("pointermove",$),x()}),{once:!0})},align:"center",sx:e=>({touchAction:"none",position:"fixed",overflow:"hidden",top:`var(${w}, 109px)`,right:`var(${g}, 23px)`,zIndex:e.zIndices.$fab,boxShadow:e.shadows.$fabShadow,borderRadius:e.radii.$halfHeight,backgroundColor:e.colors.$white,fontFamily:e.fonts.$main,":hover":{cursor:"grab"},":hover #cl-impersonationText":{transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$slower} ease ${e.transitionDuration.$slowest}`,maxWidth:`min(calc(50vw - ${p} - 2 * 23px), ${b}ch)`,[u.mqu.md]:{maxWidth:`min(calc(100vw - ${p} - 2 * 23px), ${b}ch)`},opacity:1},":hover #cl-impersonationEye":{transform:"rotate(-180deg)"}}),children:[(0,o.Y)(h,{id:"cl-impersonationEye",width:p,height:f,sx:e=>({transition:`transform ${e.transitionDuration.$slowest} ease`})}),(0,o.Y)(c.Flex,{id:"cl-impersonationText",sx:e=>({transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$fast} ease`,maxWidth:"0px",opacity:0}),children:(0,o.Y)(m,{title:v,signOutText:(0,c.localizationKeys)("impersonationFab.action__signOut")})})]})})},w=(0,a.withCoreUserGuard)((()=>(0,o.Y)(u.InternalThemeProvider,{children:(0,o.Y)(f,{})})))}}]);