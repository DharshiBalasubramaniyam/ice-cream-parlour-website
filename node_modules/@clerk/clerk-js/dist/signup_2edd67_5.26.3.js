"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[787],{1932:function(e,i,t){t.r(i),t.d(i,{SignUp:function(){return W},SignUpModal:function(){return B}});var r=t(4380),a=t(3931),n=t(4041),s=t(9251),o=t(844),l=t(9333),d=t(166),c=t(338),u=t(1241),m=t(9927),p=t(8436),h=t(3965);const f=e=>{const{handleSubmit:i,fields:t,formState:a,canToggleEmailPhone:n,handleEmailPhoneToggle:s}=e,{showOptionalFields:o}=(0,l.useAppearance)().parsedLayout,d=e=>{var i;return"emailAddress"!==e&&"phoneNumber"!==e||!n?!!t[e]&&(o||(null===(i=t[e])||void 0===i?void 0:i.required)):!!t[e]};return(0,r.FD)(c.Form.Root,{onSubmit:i,gap:8,children:[(0,r.FD)(l.Col,{gap:6,children:[(d("firstName")||d("lastName"))&&(0,r.FD)(c.Form.ControlRow,{elementId:"name",sx:{[h.mqu.sm]:{flexWrap:"wrap"}},children:[d("firstName")&&(0,r.Y)(c.Form.PlainInput,{...a.firstName.props,isRequired:t.firstName.required,isOptional:!t.firstName.required}),d("lastName")&&(0,r.Y)(c.Form.PlainInput,{...a.lastName.props,isRequired:t.lastName.required,isOptional:!t.lastName.required})]}),d("username")&&(0,r.Y)(c.Form.ControlRow,{elementId:"username",children:(0,r.Y)(c.Form.PlainInput,{...a.username.props,isRequired:t.username.required,isOptional:!t.username.required})}),d("emailAddress")&&(0,r.Y)(c.Form.ControlRow,{elementId:"emailAddress",children:(0,r.Y)(c.Form.PlainInput,{...a.emailAddress.props,isRequired:t.emailAddress.required,isOptional:!t.emailAddress.required,isDisabled:t.emailAddress.disabled,actionLabel:n?(0,l.localizationKeys)("signUp.start.actionLink__use_phone"):void 0,onActionClicked:n?()=>s("phoneNumber"):void 0})}),d("phoneNumber")&&(0,r.Y)(c.Form.ControlRow,{elementId:"phoneNumber",children:(0,r.Y)(c.Form.PhoneInput,{...a.phoneNumber.props,isRequired:t.phoneNumber.required,isOptional:!t.phoneNumber.required,actionLabel:n?(0,l.localizationKeys)("signUp.start.actionLink__use_email"):void 0,onActionClicked:n?()=>s("emailAddress"):void 0})}),d("password")&&(0,r.Y)(c.Form.ControlRow,{elementId:"password",children:(0,r.Y)(c.Form.PasswordInput,{...a.password.props,isRequired:t.password.required,isOptional:!t.password.required})})]}),(0,r.FD)(l.Col,{center:!0,children:[(0,r.Y)(p.j,{}),(0,r.Y)(c.Form.SubmitButton,{hasArrow:!0,localizationKey:(0,l.localizationKeys)("formButtonPrimary")})]})]})};var g=t(1732);const v=["emailAddress","phoneNumber","username","firstName","lastName","password","ticket"];function b(e){return v.reduce(((i,t)=>{const r=function(e,i){switch(e){case"emailAddress":return function({attributes:e,hasTicket:i,hasEmail:t,activeCommIdentifierType:r,isProgressiveSignUp:a}){if(a){if(!(!i||i&&t)||!e.email_address.enabled)return;if(_(e,a)&&"emailAddress"!==r)return;return{required:e.email_address.required,disabled:!!i&&!!t}}if((!i||i&&t)&&e.email_address.enabled&&e.email_address.used_for_first_factor&&"emailAddress"==r)return{required:!0,disabled:!!i&&!!t}}(i);case"phoneNumber":return function({attributes:e,hasTicket:i,activeCommIdentifierType:t,isProgressiveSignUp:r}){if(r){if(!e.phone_number.enabled)return;if(_(e,r)&&"phoneNumber"!==t)return;return{required:e.phone_number.required}}if(!i&&e.phone_number.enabled&&e.phone_number.used_for_first_factor&&"phoneNumber"==t)return{required:!0}}(i);case"password":return function(e){if(e.password.enabled&&e.password.required)return{required:e.password.required}}(i.attributes);case"ticket":return function(e){if(e)return{required:!0}}(i.hasTicket);case"username":case"firstName":case"lastName":return function(e,i){const t=(0,g.C8)(e);if(i[t].enabled)return{required:i[t].required}}(e,i.attributes);default:return}}(t,e);return r&&(i[t]=r),i}),{})}const y=(e,i)=>{if(_(e,i))return"emailAddress";const{email_address:t,phone_number:r}=e;return(t.enabled&&i?t.required:t.used_for_first_factor)?"emailAddress":(r.enabled&&i?r.required:r.used_for_first_factor)?"phoneNumber":null};function _(e,i){const{email_address:t,phone_number:r}=e;return i?t.enabled&&r.enabled&&!t.required&&!r.required:t.used_for_first_factor&&r.used_for_first_factor}var U=t(7453),A=t(9351),C=t(5675);const S=n.memo((e=>{const i=(0,a.ho)(),{navigate:t}=(0,d.useRouter)(),n=(0,c.useCardState)(),{displayConfig:s}=(0,A.O)(),l=(0,o.useSignUpContext)(),u=(0,o.useCoreSignUp)(),p=(0,U.u)(l,s.signUpUrl),h=l.afterSignUpUrl||"/",{continueSignUp:f=!1,...g}=e;return(0,r.Y)(C.V,{...g,oauthCallback:e=>u.authenticateWithRedirect({continueSignUp:f,redirectUrl:p,redirectUrlComplete:h,strategy:e,unsafeMetadata:l.unsafeMetadata}).catch((e=>(0,m.H4)(e,[],n.setError))),web3Callback:e=>i.authenticateWithWeb3({customNavigate:t,redirectUrl:h,signUpContinueUrl:"continue",unsafeMetadata:l.unsafeMetadata,strategy:e}).catch((e=>(0,m.H4)(e,[],n.setError)))})}));var N=t(8356);const F=(0,c.withCardStateProvider)((function(){var e,i,t,s;const p=(0,u.f0)(),h=(0,a.ho)(),{navigate:g}=(0,d.useRouter)(),{displayConfig:v,userSettings:U}=(0,o.useEnvironment)(),{attributes:A}=U,{navigateAfterSignUp:C,signInUrl:F,unsafeMetadata:Y,initialValues:E={}}=(0,o.useSignUpContext)(),w=(0,o.useCoreSignUp)(),P=U.signUp.progressive,[z,K]=n.useState(y(A,U.signUp.progressive));if(!w.id)return g(v.signUpUrl),(0,r.Y)(c.LoadingCard,{});const I={firstName:(0,m.tJ)("firstName",E.firstName||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,m.tJ)("lastName",E.lastName||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,m.tJ)("emailAddress",E.emailAddress||"",{type:"email",label:(0,l.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,m.tJ)("username",E.username||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__username"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__username")}),phoneNumber:(0,m.tJ)("phoneNumber",E.phoneNumber||"",{type:"tel",label:(0,l.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,m.tJ)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0})},k=!!I.emailAddress.value,L="verified"==(null===(i=null===(e=w.verifications)||void 0===e?void 0:e.externalAccount)||void 0===i?void 0:i.status),R="verified"==(null===(s=null===(t=w.verifications)||void 0===t?void 0:t.web3Wallet)||void 0===s?void 0:s.status),T=b({attributes:A,hasEmail:k,activeCommIdentifierType:z,signUp:w,isProgressiveSignUp:P});!function(e,i){var t,r,a,n,s,o,l,d;if(i){const c=!!i.emailAddress,u="verified"==(null===(r=null===(t=i.verifications)||void 0===t?void 0:t.emailAddress)||void 0===r?void 0:r.status),m="verified"==(null===(n=null===(a=i.verifications)||void 0===a?void 0:a.phoneNumber)||void 0===n?void 0:n.status),p="verified"==(null===(o=null===(s=i.verifications)||void 0===s?void 0:s.externalAccount)||void 0===o?void 0:o.status),h="verified"==(null===(d=null===(l=i.verifications)||void 0===l?void 0:l.web3Wallet)||void 0===d?void 0:d.status);c&&u&&delete e.emailAddress,m&&delete e.phoneNumber,(p||h)&&delete e.password,i.firstName&&delete e.firstName,i.lastName&&delete e.lastName,i.username&&delete e.username,Object.entries(e).forEach((([i,t])=>{t&&!t.required&&delete e[i]}))}}(T,w);const q=U.authenticatableSocialStrategies,D=U.web3FirstFactors,O=_(A,P),x=!L&&q.length>0,H=!R&&D.length>0;return(0,r.Y)(l.Flow.Part,{part:"complete",children:(0,r.FD)(c.Card.Root,{children:[(0,r.FD)(c.Card.Content,{children:[(0,r.FD)(c.Header.Root,{showLogo:!0,children:[(0,r.Y)(c.Header.Title,{localizationKey:(0,l.localizationKeys)("signUp.continue.title")}),(0,r.Y)(c.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signUp.continue.subtitle")})]}),(0,r.Y)(c.Card.Alert,{children:p.error}),(0,r.Y)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:8,children:(0,r.FD)(c.SocialButtonsReversibleContainerWithDivider,{children:[(x||H)&&(0,r.Y)(S,{enableOAuthProviders:x,enableWeb3Providers:H,continueSignUp:!0}),(0,r.Y)(f,{handleSubmit:async e=>{var i,t;e.preventDefault();const r=Object.entries(T).reduce(((e,[i,t])=>[...e,...t&&I[i]?[I[i]]:[]]),[]);Y&&r.push({id:"unsafeMetadata",value:Y});const a=!!(null===(i=r.find((e=>"emailAddress"===e.id)))||void 0===i?void 0:i.value),n=!!(null===(t=r.find((e=>"phoneNumber"===e.id)))||void 0===t?void 0:t.value);return w.missingFields.includes("email_address")&&w.missingFields.includes("phone_number")&&!a&&!n&&_(A,P)&&(r.push(I.emailAddress),r.push(I.phoneNumber)),p.setLoading(),p.setError(void 0),w.update((0,m.mK)(r)).then((e=>(0,N.A)({signUp:e,verifyEmailPath:"./verify-email-address",verifyPhonePath:"./verify-phone-number",handleComplete:()=>h.setActive({session:e.createdSessionId,beforeEmit:C}),navigate:g}))).catch((e=>(0,m.H4)(e,r,p.setError))).finally((()=>p.setIdle()))},fields:T,formState:I,canToggleEmailPhone:O,handleEmailPhoneToggle:e=>{_(A,P)&&K(e)}})]})})]}),(0,r.Y)(c.Card.Footer,{children:(0,r.FD)(c.Card.Action,{elementId:"signUp",children:[(0,r.Y)(c.Card.ActionText,{localizationKey:(0,l.localizationKeys)("signUp.continue.actionText")}),(0,r.Y)(c.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signUp.continue.actionLink"),to:h.buildUrlWithAuth(F)})]})})]})})}));var Y=t(7362);const E=(0,Y.Ai)(Y.Fv);var w=t(6480),P=t(4927),z=t(5909),K=t(8313);const I=()=>{const e=(0,a.ho)(),i=(0,u.f0)(),{signInUrl:t}=(0,o.useSignUpContext)();return(0,r.FD)(c.Card.Root,{children:[(0,r.FD)(c.Card.Content,{children:[(0,r.FD)(c.Header.Root,{showLogo:!0,children:[(0,r.Y)(l.Icon,{icon:K.eB,sx:e=>({margin:"auto",width:e.sizes.$12,height:e.sizes.$12})}),(0,r.Y)(c.Header.Title,{localizationKey:(0,l.localizationKeys)("signUp.restrictedAccess.title")}),(0,r.Y)(c.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signUp.restrictedAccess.subtitle")})]}),(0,r.Y)(c.Card.Alert,{children:i.error}),(0,r.Y)(c.Card.Action,{elementId:"signUp",children:(0,r.Y)(c.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signUp.restrictedAccess.actionLink"),to:e.buildUrlWithAuth(t)})})]}),(0,r.Y)(c.Card.Footer,{})]})},k=(0,Y.Ai)((0,c.withCardStateProvider)((function(){const e=(0,u.f0)(),i=(0,a.ho)(),t=(0,z.mN)(),s=(0,o.useCoreSignUp)(),{showOptionalFields:h}=(0,l.useAppearance)().parsedLayout,{userSettings:g,displayConfig:v}=(0,o.useEnvironment)(),{navigate:U}=(0,d.useRouter)(),{attributes:A}=g,{setActive:C}=(0,a.ho)(),F=(0,o.useSignUpContext)(),{navigateAfterSignUp:E,signInUrl:K,unsafeMetadata:k}=F,[L,R]=n.useState(y(A,g.signUp.progressive)),{t:T,locale:q}=(0,l.useLocalizations)(),D=F.initialValues||{},[O,x]=n.useState(!1),{userSettings:{passwordSettings:H}}=(0,o.useEnvironment)(),{mode:V}=g.signUp,W={firstName:(0,m.tJ)("firstName",s.firstName||D.firstName||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,m.tJ)("lastName",s.lastName||D.lastName||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,m.tJ)("emailAddress",s.emailAddress||D.emailAddress||"",{type:"email",label:(0,l.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,m.tJ)("username",s.username||D.username||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__username"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim()}),phoneNumber:(0,m.tJ)("phoneNumber",s.phoneNumber||D.phoneNumber||"",{type:"tel",label:(0,l.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,m.tJ)("password","",{type:"password",label:(0,l.localizationKeys)("formFieldLabel__password"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0,buildErrorMessage:e=>(0,m.C5)(e,{t:T,locale:q,passwordSettings:H})}),ticket:(0,m.tJ)("ticket",(0,P.h)("__clerk_ticket")||(0,P.h)("__clerk_invitation_token")||"")},B=!!W.ticket.value,M=!!W.emailAddress.value,J=g.signUp.progressive,j=b({attributes:A,hasTicket:B,hasEmail:M,activeCommIdentifierType:L,isProgressiveSignUp:J});if(n.useLayoutEffect((()=>{W.ticket.value&&(t.setLoading(),e.setLoading(),s.create({strategy:"ticket",ticket:W.ticket.value}).then((e=>(W.emailAddress.setValue(e.emailAddress||""),"missing_requirements"===e.status&&x(!0),(0,N.A)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>((0,P.r)("__clerk_ticket"),(0,P.r)("__clerk_invitation_token"),C({session:e.createdSessionId,beforeEmit:E})),navigate:U})))).catch((i=>{W.ticket.setValue(""),(0,m.H4)(i,[],e.setError)})).finally((()=>{t.setIdle(),e.setIdle()})))}),[]),n.useEffect((()=>{!async function(){const i=s.verifications.externalAccount.error;if(i){switch(i.code){case w.OQ.NOT_ALLOWED_TO_SIGN_UP:case w.OQ.OAUTH_ACCESS_DENIED:case w.OQ.NOT_ALLOWED_ACCESS:case w.OQ.SAML_USER_ATTRIBUTE_MISSING:case w.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case w.OQ.USER_LOCKED:e.setError(i);break;default:e.setError("Unable to complete action at this time. If the problem persists please contact support.")}await s.create({})}}()}),[]),t.isLoading)return(0,r.Y)(c.LoadingCard,{});const Q=_(A,J),$=Object.entries(j).filter((([e,i])=>h||(null==i?void 0:i.required))),G=function(e){const{authenticatableSocialStrategies:i,web3FirstFactors:t}=e;return e.hasValidAuthFactor||!i.length&&!t.length}(g)&&$.length>0,X=(!B||O)&&g.authenticatableSocialStrategies.length>0,Z=!B&&g.web3FirstFactors.length>0;return V!==w.P6.RESTRICTED||B?(0,r.Y)(l.Flow.Part,{part:"start",children:(0,r.FD)(c.Card.Root,{children:[(0,r.FD)(c.Card.Content,{children:[(0,r.FD)(c.Header.Root,{showLogo:!0,children:[(0,r.Y)(c.Header.Title,{localizationKey:(0,l.localizationKeys)("signUp.start.title")}),(0,r.Y)(c.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("signUp.start.subtitle")})]}),(0,r.Y)(c.Card.Alert,{children:e.error}),(0,r.FD)(l.Flex,{direction:"col",elementDescriptor:l.descriptors.main,gap:6,children:[(0,r.FD)(c.SocialButtonsReversibleContainerWithDivider,{children:[(X||Z)&&(0,r.Y)(S,{enableOAuthProviders:X,enableWeb3Providers:Z,continueSignUp:O}),G&&(0,r.Y)(f,{handleSubmit:async i=>{var t,r;i.preventDefault();const a=Object.entries(j).reduce(((e,[i,t])=>[...e,...t&&W[i]?[W[i]]:[]]),[]);if(k&&a.push({id:"unsafeMetadata",value:k}),j.ticket){const e=()=>{};a.push({id:"strategy",value:"ticket",setValue:e,onChange:e,setError:e})}const n=!!(null===(t=a.find((e=>"emailAddress"===e.id)))||void 0===t?void 0:t.value),o=!!(null===(r=a.find((e=>"phoneNumber"===e.id)))||void 0===r?void 0:r.value);n||o||!_(A,J)||(a.push(W.emailAddress),a.push(W.phoneNumber)),e.setLoading(),e.setError(void 0);const l=(0,Y.uP)(F,v.signUpUrl),d=F.afterSignUpUrl||"/";return s.create((0,m.mK)(a)).then((e=>(0,N.A)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>C({session:e.createdSessionId,beforeEmit:E}),navigate:U,redirectUrl:l,redirectUrlComplete:d}))).catch((i=>(0,m.H4)(i,a,e.setError))).finally((()=>e.setIdle()))},fields:j,formState:W,canToggleEmailPhone:Q,handleEmailPhoneToggle:e=>{_(A,J)&&R(e)}})]}),!G&&(0,r.Y)(p.j,{})]})]}),(0,r.Y)(c.Card.Footer,{children:(0,r.FD)(c.Card.Action,{elementId:"signUp",children:[(0,r.Y)(c.Card.ActionText,{localizationKey:(0,l.localizationKeys)("signUp.start.actionText")}),(0,r.Y)(c.Card.ActionLink,{localizationKey:(0,l.localizationKeys)("signUp.start.actionLink"),to:i.buildUrlWithAuth(K)})]})})]})}):(0,r.Y)(I,{})}))),L=e=>{const{navigateAfterSignUp:i}=(0,o.useSignUpContext)(),{setActive:t}=(0,a.ho)(),{navigate:n}=(0,d.useRouter)();return(0,r.Y)(c.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,a,s)=>{e.attempt(r).then((async e=>(await a(),(0,N.A)({signUp:e,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>t({session:e.createdSessionId,beforeEmit:i}),navigate:n})))).catch((e=>s(e)))},onResendCodeClicked:e.prepare,safeIdentifier:e.safeIdentifier,onIdentityPreviewEditClicked:()=>n("../")})},R=()=>{const e=(0,o.useCoreSignUp)(),i=(0,c.useCardState)(),t=e.verifications.emailAddress.status,a=!e.status||"verified"===t;return(0,z.st)(a?void 0:()=>e.prepareEmailAddressVerification({strategy:"email_code"}).catch((e=>(0,m.H4)(e,[],i.setError))),{name:"prepare",strategy:"email_code",number:e.emailAddress},{staleTime:100}),(0,r.Y)(l.Flow.Part,{part:"emailCode",children:(0,r.Y)(L,{cardTitle:(0,l.localizationKeys)("signUp.emailCode.title"),cardSubtitle:(0,l.localizationKeys)("signUp.emailCode.subtitle"),inputLabel:(0,l.localizationKeys)("signUp.emailCode.formSubtitle"),resendButton:(0,l.localizationKeys)("signUp.emailCode.resendButton"),prepare:()=>{if(!a)return e.prepareEmailAddressVerification({strategy:"email_code"}).catch((e=>(0,m.H4)(e,[],i.setError)))},attempt:i=>e.attemptEmailAddressVerification({code:i}),safeIdentifier:e.emailAddress})})};var T=t(6910);const q=()=>{const{t:e}=(0,l.useLocalizations)(),i=(0,o.useCoreSignUp)(),t=(0,o.useSignUpContext)(),{navigateAfterSignUp:s}=t,p=(0,u.f0)(),{displayConfig:h}=(0,o.useEnvironment)(),{navigate:f}=(0,d.useRouter)(),{setActive:g}=(0,a.ho)(),[v,b]=n.useState(!1),{startEmailLinkFlow:y,cancelEmailLinkFlow:_}=(0,T.u)(i);n.useEffect((()=>{A()}),[]);const A=()=>y({redirectUrl:(0,U.W)(t,h.signUpUrl)}).then((e=>C(e))).catch((e=>{(0,m.H4)(e,[],p.setError)})),C=async i=>{const t=i.verifications.emailAddress;"expired"===t.status?p.setError(e((0,l.localizationKeys)("formFieldError__verificationLinkExpired"))):t.verifiedFromTheSameClient()?b(!0):await(0,N.A)({signUp:i,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>g({session:i.createdSessionId,beforeEmit:s}),navigate:f})};return v?(0,r.Y)(Y.$W,{title:(0,l.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,l.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.Y)(l.Flow.Part,{part:"emailLink",children:(0,r.Y)(c.VerificationLinkCard,{cardTitle:(0,l.localizationKeys)("signUp.emailLink.title"),cardSubtitle:(0,l.localizationKeys)("signUp.emailLink.subtitle"),formTitle:(0,l.localizationKeys)("signUp.emailLink.formTitle"),formSubtitle:(0,l.localizationKeys)("signUp.emailLink.formSubtitle"),resendButton:(0,l.localizationKeys)("signUp.emailLink.resendButton"),onResendCodeClicked:()=>{_(),A()},safeIdentifier:i.emailAddress})})},D=(0,c.withCardStateProvider)((()=>{const{userSettings:e}=(0,o.useEnvironment)(),{attributes:i}=e;return i.email_address.verifications.includes("email_link")?(0,r.Y)(q,{}):(0,r.Y)(R,{})})),O=(0,c.withCardStateProvider)((()=>{const e=(0,o.useCoreSignUp)(),i=(0,c.useCardState)(),t=e.verifications.phoneNumber.status,a=!e.status||"verified"===t;return(0,z.st)(a?void 0:()=>e.preparePhoneNumberVerification({strategy:"phone_code"}).catch((e=>(0,m.H4)(e,[],i.setError))),{name:"signUp.preparePhoneNumberVerification",strategy:"phone_code",number:e.phoneNumber},{staleTime:100}),(0,r.Y)(l.Flow.Part,{part:"phoneCode",children:(0,r.Y)(L,{cardTitle:(0,l.localizationKeys)("signUp.phoneCode.title"),cardSubtitle:(0,l.localizationKeys)("signUp.phoneCode.subtitle"),resendButton:(0,l.localizationKeys)("signUp.phoneCode.resendButton"),prepare:()=>{if(!a)return e.preparePhoneNumberVerification({strategy:"phone_code"}).catch((e=>(0,m.H4)(e,[],i.setError)))},attempt:i=>e.attemptPhoneNumberVerification({code:i}),safeIdentifier:e.phoneNumber})})})),x=()=>(0,r.Y)(O,{});function H(){const e=(0,a.ho)();return n.useEffect((()=>{e.redirectToSignUp()}),[]),null}function V(){const e=(0,o.useSignUpContext)();return(0,r.Y)(l.Flow.Root,{flow:"signUp",children:(0,r.FD)(d.Switch,{children:[(0,r.Y)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.Y)(D,{})}),(0,r.Y)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.Y)(x,{})}),(0,r.Y)(d.Route,{path:"sso-callback",children:(0,r.Y)(E,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,signInForceRedirectUrl:e.afterSignInUrl,secondFactorUrl:e.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number"})}),(0,r.Y)(d.Route,{path:"verify",children:(0,r.Y)(s.M,{redirectUrlComplete:e.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number"})}),(0,r.FD)(d.Route,{path:"continue",children:[(0,r.Y)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.Y)(D,{})}),(0,r.Y)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.Y)(x,{})}),(0,r.Y)(d.Route,{index:!0,children:(0,r.Y)(F,{})})]}),(0,r.Y)(d.Route,{index:!0,children:(0,r.Y)(k,{})}),(0,r.Y)(d.Route,{children:(0,r.Y)(H,{})})]})})}V.displayName="SignUp";const W=(0,o.withCoreSessionSwitchGuard)(V),B=e=>{const i={signInUrl:`/${d.VIRTUAL_ROUTER_BASE_PATH}/sign-in`,...e};return(0,r.Y)(d.Route,{path:"sign-up",children:(0,r.Y)(o.ComponentContext.Provider,{value:{componentName:"SignUp",...i,routing:"virtual"},children:(0,r.Y)("div",{children:(0,r.Y)(W,{...i,routing:"virtual"})})})})}}}]);