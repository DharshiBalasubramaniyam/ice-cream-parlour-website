"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[916],{2916:function(e,t,o){o.d(t,{A:function(){return v}});var i=o(4380),n=o(3931),a=o(4041),r=o(7362),l=o(9333),s=o(338),c=o(8313),d=o(9513),u=o(9927),g=o(6912),m=o(2622),p=o(699),h=o(4683);const v=(0,s.withCardStateProvider)((e=>{var t,o;const v=(0,s.useCardState)(),b=(0,r.Xi)({onNextStep:()=>v.setError(void 0)}),f=a.useRef(null),{createOrganization:x,isLoaded:_,setActive:z,userMemberships:S}=(0,n.D_)({userMemberships:h.mu.userMemberships}),{organization:Y}=(0,n.Z5)(),[F,C]=a.useState(),y=(0,u.tJ)("name","",{type:"text",label:(0,d.GQ)("formFieldLabel__organizationName"),placeholder:(0,d.GQ)("formFieldInputPlaceholder__organizationName")}),P=(0,u.tJ)("slug","",{type:"text",label:(0,d.GQ)("formFieldLabel__organizationSlug"),placeholder:(0,d.GQ)("formFieldInputPlaceholder__organizationSlug")}),$=!!y.value,T=()=>{var t;e.navigateAfterCreateOrganization(f.current),null===(t=e.onComplete)||void 0===t||t.call(e)},w=e=>{P.setValue(e)},D="organizationList"===e.flow?"subtitle":void 0;return(0,i.FD)(r.sQ,{...b.props,children:[(0,i.Y)(s.FormContainer,{headerTitle:null===(t=null==e?void 0:e.startPage)||void 0===t?void 0:t.headerTitle,headerSubtitle:null===(o=null==e?void 0:e.startPage)||void 0===o?void 0:o.headerSubtitle,headerTitleTextVariant:"h2",headerSubtitleTextVariant:D,sx:e=>({minHeight:e.sizes.$60,gap:e.space.$6,textAlign:"left"}),children:(0,i.FD)(s.Form.Root,{onSubmit:async t=>{var o,i;if(t.preventDefault(),$&&_)try{const t={name:y.value};e.hideSlug||(t.slug=P.value);const n=await x(t);if(F&&await n.setLogo({file:F}),f.current=n,await z({organization:n}),null===(o=S.revalidate)||void 0===o||o.call(S),null!==(i=e.skipInvitationScreen)&&void 0!==i?i:1===n.maxAllowedMemberships)return T();b.nextStep()}catch(n){(0,u.H4)(n,[y,P],v.setError)}},sx:e=>({gap:e.space.$6}),children:[(0,i.Y)(l.Col,{children:(0,i.Y)(p.i,{organization:{name:y.value},onAvatarChange:async e=>await C(e),onAvatarRemove:F?()=>(v.setIdle(),C(null)):null,avatarPreviewPlaceholder:(0,i.Y)(s.IconButton,{variant:"ghost","aria-label":"Upload organization logo",icon:(0,i.Y)(l.Icon,{size:"md",icon:c._O,sx:e=>({color:e.colors.$colorTextSecondary,transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$md,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$dashed,borderColor:e.colors.$neutralAlpha200,backgroundColor:e.colors.$neutralAlpha50,":hover":{backgroundColor:e.colors.$neutralAlpha50,svg:{transform:"scale(1.2)"}}})})})}),(0,i.Y)(s.Form.ControlRow,{elementId:y.id,children:(0,i.Y)(s.Form.PlainInput,{...y.props,onChange:e=>{y.setValue(e.target.value),w((0,u.e9)(e.target.value))},isRequired:!0,autoFocus:!0,ignorePasswordManager:!0})}),!e.hideSlug&&(0,i.Y)(s.Form.ControlRow,{elementId:P.id,children:(0,i.Y)(s.Form.PlainInput,{...P.props,onChange:e=>{w(e.target.value)},isRequired:!0,pattern:"^[a-z0-9\\-]+$",ignorePasswordManager:!0})}),(0,i.FD)(s.FormButtonContainer,{sx:e=>({marginTop:e.space.$none}),children:[(0,i.Y)(s.Form.SubmitButton,{block:!1,isDisabled:!$,localizationKey:(0,d.GQ)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,i.Y)(s.Form.ResetButton,{localizationKey:(0,d.GQ)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,i.Y)(s.FormContainer,{headerTitle:(0,d.GQ)("organizationProfile.invitePage.title"),headerTitleTextVariant:"h2",headerSubtitleTextVariant:D,sx:e=>({minHeight:e.sizes.$60,textAlign:"left"}),children:Y&&(0,i.Y)(g.B,{resetButtonLabel:(0,d.GQ)("createOrganization.invitePage.formButtonReset"),onSuccess:b.nextStep,onReset:T})}),(0,i.FD)(l.Col,{children:[(0,i.Y)(s.Header.Root,{children:(0,i.Y)(s.Header.Title,{localizationKey:(0,d.GQ)("organizationProfile.invitePage.title"),sx:{textAlign:"left"}})}),(0,i.Y)(s.SuccessPage,{contents:(0,i.Y)(m.k,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:T})]})]})}))},6912:function(e,t,o){o.d(t,{B:function(){return v}});var i=o(4380),n=o(9859),a=o(3931),r=o(4041),l=o(844),s=o(9333),c=o(338),d=o(3209),u=o(9513),g=o(3965),m=o(9927),p=o(2596);const h=e=>/^\S+@\S+\.\S+$/.test(e),v=e=>{const{onSuccess:t,onReset:o,resetButtonLabel:l}=e,{organization:d,invitations:p}=(0,a.Z5)({invitations:{pageSize:10,keepPreviousData:!0}}),v=(0,c.useCardState)(),{t:x,locale:_}=(0,u._R)(),[z,S]=(0,r.useState)(!1),Y=(0,m.tJ)("emailAddress","",{type:"text",label:(0,u.GQ)("formFieldLabel__emailAddresses")}),F=f(),C=(0,m.tJ)("role","",{label:(0,u.GQ)("formFieldLabel__role")});if((0,r.useEffect)((()=>{!C.value&&F&&C.setValue(F)}),[F,C]),!d)return null;const{props:{setError:y,setWarning:P,setSuccess:$,setInfo:T,isFocused:w,validatePassword:D,setHasPassedComplexity:k,hasPassedComplexity:R,feedback:A,feedbackType:B,clearFeedback:I,...L}}=Y,Q=(!!Y.value.length||z)&&!!C.value;return(0,i.FD)(c.Form.Root,{onSubmit:e=>{if(e.preventDefault(),!Q)return;const o=new FormData(e.currentTarget);return d.inviteMembers({emailAddresses:Y.value.split(","),role:o.get("role")}).then((async()=>{var e;return await(null===(e=null==p?void 0:p.revalidate)||void 0===e?void 0:e.call(p)),null==t?void 0:t()})).catch((e=>{var t,o,i,a,r;if((0,n.$R)(e))switch((e=>{var t,o,i,n;const a=new Set([...null!==(o=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==o?o:[],...null!==(n=null===(i=e.meta)||void 0===i?void 0:i.identifiers)&&void 0!==n?n:[]]),r=Y.value.split(",");Y.setValue(r.filter((e=>!a.has(e))).join(","))})(e.errors[0]),null===(o=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===o?void 0:o.code){case"duplicate_record":{const t=(null===(i=e.errors[0].meta)||void 0===i?void 0:i.emailAddresses)||[];v.setError(x((0,u.GQ)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,m.kS)(t,_)})));break}case"already_a_member_in_organization":{const t=null===(r=(null!==(a=e.errors[0].longMessage)&&void 0!==a?a:"").match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/))||void 0===r?void 0:r[0];(0,m.H4)(e,[],(e=>t?v.setError(x((0,u.GQ)("unstable__errors.already_a_member_in_organization",{email:t}))):v.setError(e)));break}default:(0,m.H4)(e,[],v.setError)}else(0,m.H4)(e,[],v.setError)}))},children:[(0,i.Y)(c.Form.ControlRow,{elementId:Y.id,children:(0,i.Y)(c.TagInput,{...L,autoFocus:!0,validate:h,sx:{width:"100%"},validateUnsubmittedEmail:e=>S(h(e)),placeholder:(0,u.GQ)("formFieldInputPlaceholder__emailAddresses")})}),(0,i.FD)(s.Flex,{align:"center",justify:"between",sx:e=>({marginTop:e.space.$2,gap:e.space.$4,flexWrap:"wrap",[g.mqu.sm]:{justifyContent:"center"}}),children:[(0,i.Y)(b,{...C}),(0,i.FD)(c.FormButtonContainer,{sx:e=>({margin:e.space.$none,flexWrap:"wrap",justifyContent:"center"}),children:[(0,i.Y)(c.Form.SubmitButton,{block:!1,isDisabled:!Q,localizationKey:(0,u.GQ)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,i.Y)(c.Form.ResetButton,{localizationKey:l||(0,u.GQ)("userProfile.formButtonReset"),block:!1,onClick:o})]})]})]})},b=e=>{const{options:t,isLoading:o}=(0,d.x)(),{t:n}=(0,u._R)();return(0,i.Y)(c.Form.ControlRow,{elementId:e.id,children:(0,i.Y)(s.Flex,{direction:"col",gap:2,children:(0,i.Y)(p.Vo,{...e.props,roles:t,isDisabled:o,onChange:t=>e.setValue(t),triggerSx:e=>({minWidth:e.sizes.$40,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48}),prefixLocalizationKey:`${n((0,u.GQ)("formFieldLabel__role"))}:`})})})},f=()=>{const{options:e}=(0,d.x)(),{organizationSettings:t}=(0,l.useEnvironment)();let o=t.domains.defaultRole;return o||1!==(null==e?void 0:e.length)||(o=e[0].value),o}},2622:function(e,t,o){o.d(t,{k:function(){return v},D:function(){return h}});var i=o(4380),n=o(3931),a=o(4870),r=o(7362),l=o(844),s=o(9333),c=o(338),d=o(2572),u=o(8313),g=o(166);const m=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const o=(0,g.useRouter)();return(0,i.FD)(s.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,i.Y)(s.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,i.FD)(s.Text,{children:["This organization is limited to ",(0,a.Mo)(t)," members.",(0,i.Y)("br",{}),(0,i.Y)(s.Link,{sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>o.navigate((0,a.Mo)(e)),children:"Upgrade for unlimited members"})]})]})};var p=o(6912);const h=(0,c.withCardStateProvider)((e=>{const{close:t}=(0,d.D5)(),{onReset:o=t}=e,u=(0,s.localizationKeys)("organizationProfile.invitePage.title"),g=(0,s.localizationKeys)("organizationProfile.invitePage.subtitle"),h=(0,c.useCardState)(),b=(0,r.Xi)({onNextStep:()=>h.setError(void 0)}),{organization:f}=(0,n.Z5)(),{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:_}=(0,l.useOrganizationProfileContext)();if(!f)return null;const z=!!_&&(0,a.Mo)(_)<=f.pendingInvitationsCount+f.membersCount;return(0,i.FD)(r.sQ,{...b.props,children:[(0,i.FD)(c.FormContainer,{headerTitle:u,headerSubtitle:g,children:[z&&x&&(0,i.Y)(m,{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:_}),(0,i.Y)(p.B,{onSuccess:b.nextStep,onReset:o})]}),(0,i.Y)(c.SuccessPage,{title:u,onFinish:t,contents:(0,i.Y)(v,{})})]})})),v=()=>(0,i.FD)(s.Flex,{direction:"col",center:!0,gap:4,children:[(0,i.Y)(c.IconCircle,{boxElementDescriptor:s.descriptors.invitationsSentIconBox,iconElementDescriptor:s.descriptors.invitationsSentIcon,icon:u.Ps}),(0,i.Y)(s.Text,{localizationKey:(0,s.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},2596:function(e,t,o){o.d(t,{Vo:function(){return u},Yq:function(){return d},bQ:function(){return s}});var i=o(4380),n=o(4041),a=o(9333),r=o(338),l=o(3209);const s=e=>{const{headers:t,page:o,onPageChange:n,rows:l,isLoading:s,itemCount:d,itemsPerPage:u,pageCount:g,emptyStateLocalizationKey:m}=e,p=d>0?Math.max(0,(o-1)*u)+1:0,h=Math.min(o*u,d);return(0,i.FD)(a.Col,{gap:4,sx:{width:"100%"},children:[(0,i.Y)(a.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,i.FD)(a.Table,{children:[(0,i.Y)(a.Thead,{children:(0,i.Y)(a.Tr,{children:t.map(((e,t)=>(0,i.Y)(a.Th,{elementDescriptor:a.descriptors.tableHead,localizationKey:e},t)))})}),(0,i.Y)(a.Tbody,{children:s?(0,i.Y)(a.Tr,{children:(0,i.Y)(a.Td,{colSpan:4,children:(0,i.Y)(a.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:a.descriptors.spinner})})}):l.length?l:(0,i.Y)(c,{localizationKey:m},"empty")})]})}),g>1&&(0,i.Y)(r.Pagination,{count:g,page:o,onChange:n,siblingCount:1,rowInfo:{allRowsCount:d,startingRow:p,endingRow:h}})]})},c=e=>(0,i.Y)(a.Tr,{children:(0,i.Y)(a.Td,{colSpan:4,children:(0,i.Y)(a.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),d=e=>(0,i.Y)(a.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})}),u=e=>{const{value:t,roles:o,onChange:s,isDisabled:c,triggerSx:d,optionListSx:u,prefixLocalizationKey:m}=e,{localizeCustomRole:p}=(0,l.l)(),h=(0,n.useMemo)((()=>[...o||[]]),[o]),v=(0,n.useMemo)((()=>h.find((e=>e.value===t))),[h]),{t:b}=(0,a.useLocalizations)(),f=(0,n.useMemo)((()=>h.map((e=>({value:e.value,label:p(e.value)||e.label})))),[h,p]);return(0,i.FD)(r.Select,{elementId:"role",options:f,value:t,placeholder:b((0,a.localizationKeys)("organizationProfile.invitePage.selectDropdown__role")),onChange:e=>s(e.value),renderOption:(e,t,o)=>(0,i.Y)(g,{isSelected:o,option:e,sx:e=>({"&:hover":{backgroundColor:e.colors.$neutralAlpha100},'&[data-focused="true"]':{backgroundColor:e.colors.$neutralAlpha150}})}),children:[(0,i.Y)("input",{name:"role",type:"hidden",value:t}),(0,i.Y)(r.SelectButton,{sx:d||(e=>({color:e.colors.$colorText,backgroundColor:"transparent",textWrap:"nowrap"})),isDisabled:c,children:((null==v?void 0:v.label)||(null==v?void 0:v.value))&&(0,i.FD)(a.Flex,{as:"span",gap:1,children:[m&&(0,i.Y)(a.Text,{as:"span",colorScheme:"secondary",localizationKey:m}),(0,i.Y)(a.Text,{as:"span",sx:e=>({color:e.colors.$colorText}),children:p(null==v?void 0:v.value)||(null==v?void 0:v.label)})]})}),(0,i.Y)(r.SelectOptionList,{sx:u})]})},g=(0,n.memo)((e=>{const{option:t,isSelected:o,sx:n,...r}=e;return(0,i.Y)(a.Flex,{sx:[e=>({width:"100%",padding:`${e.space.$2} ${e.space.$4}`,borderRadius:e.radii.$md}),n],...r,children:(0,i.Y)(a.Text,{colorScheme:"secondary",children:null==t?void 0:t.label})})}))},699:function(e,t,o){o.d(t,{i:function(){return l}});var i=o(4380),n=o(9333),a=o(338),r=o(9513);const l=e=>{const{organization:t,...o}=e;return(0,i.FD)(n.Col,{elementDescriptor:n.descriptors.organizationAvatarUploaderContainer,children:[(0,i.Y)(n.Text,{variant:"subtitle",sx:e=>({textAlign:"left",marginBottom:e.space.$2}),localizationKey:(0,r.GQ)("organizationProfile.start.profileSection.uploadAction__title")}),(0,i.Y)(a.AvatarUploader,{...o,title:(0,r.GQ)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,i.Y)(a.OrganizationAvatar,{size:e=>e.sizes.$16,...t})})]})}},4683:function(e,t,o){o.d(t,{l_:function(){return n},mu:function(){return i}});const i={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},n=(e,t,o)=>{var i;if(void 0===t)return[{data:[e],total_count:1}];const n=(null===(i=null==t?void 0:t[t.length-1])||void 0===i?void 0:i.total_count)||1;return t.map((t=>{if(void 0===t)return t;const i=t.data.map((t=>t.id===e.id?{...e}:t));return{...t,data:i,total_count:"negative"===o?n-1:n}}))}}}]);