{"version":3,"file":"Feedback.js","sources":["../src/Feedback.ts"],"sourcesContent":["import { zxcvbnOptions } from './Options';\nimport bruteforceMatcher from './matcher/bruteforce/feedback';\nimport dateMatcher from './matcher/date/feedback';\nimport dictionaryMatcher from './matcher/dictionary/feedback';\nimport regexMatcher from './matcher/regex/feedback';\nimport repeatMatcher from './matcher/repeat/feedback';\nimport sequenceMatcher from './matcher/sequence/feedback';\nimport spatialMatcher from './matcher/spatial/feedback';\nimport separatorMatcher from './matcher/separator/feedback';\nconst defaultFeedback = {\n    warning: null,\n    suggestions: [],\n};\n/*\n * -------------------------------------------------------------------------------\n *  Generate feedback ---------------------------------------------------------------\n * -------------------------------------------------------------------------------\n */\nclass Feedback {\n    constructor() {\n        this.matchers = {\n            bruteforce: bruteforceMatcher,\n            date: dateMatcher,\n            dictionary: dictionaryMatcher,\n            regex: regexMatcher,\n            repeat: repeatMatcher,\n            sequence: sequenceMatcher,\n            spatial: spatialMatcher,\n            separator: separatorMatcher,\n        };\n        this.defaultFeedback = {\n            warning: null,\n            suggestions: [],\n        };\n        this.setDefaultSuggestions();\n    }\n    setDefaultSuggestions() {\n        this.defaultFeedback.suggestions.push(zxcvbnOptions.translations.suggestions.useWords, zxcvbnOptions.translations.suggestions.noNeed);\n    }\n    getFeedback(score, sequence) {\n        if (sequence.length === 0) {\n            return this.defaultFeedback;\n        }\n        if (score > 2) {\n            return defaultFeedback;\n        }\n        const extraFeedback = zxcvbnOptions.translations.suggestions.anotherWord;\n        const longestMatch = this.getLongestMatch(sequence);\n        let feedback = this.getMatchFeedback(longestMatch, sequence.length === 1);\n        if (feedback !== null && feedback !== undefined) {\n            feedback.suggestions.unshift(extraFeedback);\n        }\n        else {\n            feedback = {\n                warning: null,\n                suggestions: [extraFeedback],\n            };\n        }\n        return feedback;\n    }\n    getLongestMatch(sequence) {\n        let longestMatch = sequence[0];\n        const slicedSequence = sequence.slice(1);\n        slicedSequence.forEach((match) => {\n            if (match.token.length > longestMatch.token.length) {\n                longestMatch = match;\n            }\n        });\n        return longestMatch;\n    }\n    getMatchFeedback(match, isSoleMatch) {\n        if (this.matchers[match.pattern]) {\n            return this.matchers[match.pattern](match, isSoleMatch);\n        }\n        if (zxcvbnOptions.matchers[match.pattern] &&\n            'feedback' in zxcvbnOptions.matchers[match.pattern]) {\n            return zxcvbnOptions.matchers[match.pattern].feedback(match, isSoleMatch);\n        }\n        return defaultFeedback;\n    }\n}\nexport default Feedback;\n//# sourceMappingURL=Feedback.js.map"],"names":["defaultFeedback","warning","suggestions","Feedback","constructor","matchers","bruteforce","bruteforceMatcher","date","dateMatcher","dictionary","dictionaryMatcher","regex","regexMatcher","repeat","repeatMatcher","sequence","sequenceMatcher","spatial","spatialMatcher","separator","separatorMatcher","setDefaultSuggestions","push","zxcvbnOptions","translations","useWords","noNeed","getFeedback","score","length","extraFeedback","anotherWord","longestMatch","getLongestMatch","feedback","getMatchFeedback","undefined","unshift","slicedSequence","slice","forEach","match","token","isSoleMatch","pattern"],"mappings":"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"}