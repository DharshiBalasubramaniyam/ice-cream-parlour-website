{"version":3,"file":"Matching.js","sources":["../src/Matching.ts"],"sourcesContent":["import { extend, sorted } from './helper';\nimport dateMatcher from './matcher/date/matching';\nimport dictionaryMatcher from './matcher/dictionary/matching';\nimport regexMatcher from './matcher/regex/matching';\nimport repeatMatcher from './matcher/repeat/matching';\nimport sequenceMatcher from './matcher/sequence/matching';\nimport spatialMatcher from './matcher/spatial/matching';\nimport separatorMatcher from './matcher/separator/matching';\nimport { zxcvbnOptions } from './Options';\nclass Matching {\n    constructor() {\n        this.matchers = {\n            date: dateMatcher,\n            dictionary: dictionaryMatcher,\n            regex: regexMatcher,\n            // @ts-ignore => TODO resolve this type issue. This is because it is possible to be async\n            repeat: repeatMatcher,\n            sequence: sequenceMatcher,\n            spatial: spatialMatcher,\n            separator: separatorMatcher,\n        };\n    }\n    match(password) {\n        const matches = [];\n        const promises = [];\n        const matchers = [\n            ...Object.keys(this.matchers),\n            ...Object.keys(zxcvbnOptions.matchers),\n        ];\n        matchers.forEach((key) => {\n            if (!this.matchers[key] && !zxcvbnOptions.matchers[key]) {\n                return;\n            }\n            const Matcher = this.matchers[key]\n                ? this.matchers[key]\n                : zxcvbnOptions.matchers[key].Matching;\n            const usedMatcher = new Matcher();\n            const result = usedMatcher.match({\n                password,\n                omniMatch: this,\n            });\n            if (result instanceof Promise) {\n                result.then((response) => {\n                    extend(matches, response);\n                });\n                promises.push(result);\n            }\n            else {\n                extend(matches, result);\n            }\n        });\n        if (promises.length > 0) {\n            return new Promise((resolve, reject) => {\n                Promise.all(promises)\n                    .then(() => {\n                    resolve(sorted(matches));\n                })\n                    .catch((error) => {\n                    reject(error);\n                });\n            });\n        }\n        return sorted(matches);\n    }\n}\nexport default Matching;\n//# sourceMappingURL=Matching.js.map"],"names":["Matching","constructor","matchers","date","dateMatcher","dictionary","dictionaryMatcher","regex","regexMatcher","repeat","repeatMatcher","sequence","sequenceMatcher","spatial","spatialMatcher","separator","separatorMatcher","match","password","matches","promises","Object","keys","zxcvbnOptions","forEach","key","Matcher","usedMatcher","result","omniMatch","Promise","then","response","extend","push","length","resolve","reject","all","sorted","catch","error"],"mappings":";;;;;;;;;;;;AASA,MAAMA,QAAQ,CAAC;AACXC,EAAAA,WAAWA,GAAG;IACV,IAAI,CAACC,QAAQ,GAAG;AACZC,MAAAA,IAAI,EAAEC,QAAW;AACjBC,MAAAA,UAAU,EAAEC,UAAiB;AAC7BC,MAAAA,KAAK,EAAEC,UAAY;AACnB;AACAC,MAAAA,MAAM,EAAEC,UAAa;AACrBC,MAAAA,QAAQ,EAAEC,UAAe;AACzBC,MAAAA,OAAO,EAAEC,UAAc;AACvBC,MAAAA,SAAS,EAAEC,UAAAA;KACd,CAAA;AACL,GAAA;EACAC,KAAKA,CAACC,QAAQ,EAAE;IACZ,MAAMC,OAAO,GAAG,EAAE,CAAA;IAClB,MAAMC,QAAQ,GAAG,EAAE,CAAA;IACnB,MAAMlB,QAAQ,GAAG,CACb,GAAGmB,MAAM,CAACC,IAAI,CAAC,IAAI,CAACpB,QAAQ,CAAC,EAC7B,GAAGmB,MAAM,CAACC,IAAI,CAACC,qBAAa,CAACrB,QAAQ,CAAC,CACzC,CAAA;AACDA,IAAAA,QAAQ,CAACsB,OAAO,CAAEC,GAAG,IAAK;AACtB,MAAA,IAAI,CAAC,IAAI,CAACvB,QAAQ,CAACuB,GAAG,CAAC,IAAI,CAACF,qBAAa,CAACrB,QAAQ,CAACuB,GAAG,CAAC,EAAE;AACrD,QAAA,OAAA;AACJ,OAAA;MACA,MAAMC,OAAO,GAAG,IAAI,CAACxB,QAAQ,CAACuB,GAAG,CAAC,GAC5B,IAAI,CAACvB,QAAQ,CAACuB,GAAG,CAAC,GAClBF,qBAAa,CAACrB,QAAQ,CAACuB,GAAG,CAAC,CAACzB,QAAQ,CAAA;AAC1C,MAAA,MAAM2B,WAAW,GAAG,IAAID,OAAO,EAAE,CAAA;AACjC,MAAA,MAAME,MAAM,GAAGD,WAAW,CAACV,KAAK,CAAC;QAC7BC,QAAQ;AACRW,QAAAA,SAAS,EAAE,IAAA;AACf,OAAC,CAAC,CAAA;MACF,IAAID,MAAM,YAAYE,OAAO,EAAE;AAC3BF,QAAAA,MAAM,CAACG,IAAI,CAAEC,QAAQ,IAAK;AACtBC,UAAAA,aAAM,CAACd,OAAO,EAAEa,QAAQ,CAAC,CAAA;AAC7B,SAAC,CAAC,CAAA;AACFZ,QAAAA,QAAQ,CAACc,IAAI,CAACN,MAAM,CAAC,CAAA;AACzB,OAAC,MACI;AACDK,QAAAA,aAAM,CAACd,OAAO,EAAES,MAAM,CAAC,CAAA;AAC3B,OAAA;AACJ,KAAC,CAAC,CAAA;AACF,IAAA,IAAIR,QAAQ,CAACe,MAAM,GAAG,CAAC,EAAE;AACrB,MAAA,OAAO,IAAIL,OAAO,CAAC,CAACM,OAAO,EAAEC,MAAM,KAAK;QACpCP,OAAO,CAACQ,GAAG,CAAClB,QAAQ,CAAC,CAChBW,IAAI,CAAC,MAAM;AACZK,UAAAA,OAAO,CAACG,aAAM,CAACpB,OAAO,CAAC,CAAC,CAAA;AAC5B,SAAC,CAAC,CACGqB,KAAK,CAAEC,KAAK,IAAK;UAClBJ,MAAM,CAACI,KAAK,CAAC,CAAA;AACjB,SAAC,CAAC,CAAA;AACN,OAAC,CAAC,CAAA;AACN,KAAA;IACA,OAAOF,aAAM,CAACpB,OAAO,CAAC,CAAA;AAC1B,GAAA;AACJ;;;;"}